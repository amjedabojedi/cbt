import{c as Os,r as b,j as e,b as ce,E as Pt,F as Is,G as Kt,H as Vt,I as qt,P as Qt,J as be,K as Zt,M as Rs,N as As,O as Fs,Q as Ws,S as Es,U as Ls,V as Ys,Y as $s,u as Xt,n as Jt,C as T,e as A,f as F,g as je,a as O,B as S,X as Bs,h as de,D as Hs,y as zs,l as Gs}from"./index-BJDVYPr2.js";import{u as es,C as ee}from"./use-active-user-CkIppDip.js";import{u as ye}from"./useQuery-CVl6tFXz.js";import{u as Se}from"./useMutation-4_CoT2bx.js";import{u as rt,F as it,a as E,b as L,c as Y,d as $,f as V,e as B,z as I,t as ot}from"./form-Bn3qej8w.js";import{A as Us}from"./AppLayout-B4pR-pjA.js";import{B as Ks,M as Vs}from"./BackToClientsButton-_c3Gvoq3.js";import{I as ue}from"./input-C744jVRX.js";import{T as K}from"./textarea-8UmQ7iuL.js";import{P as ts}from"./progress-XD4z056s.js";import{s as Ye,a as we,d as se,b as qs,c as ft,g as Qs,e as Zs,f as R,i as ss}from"./format-CrnBQ42y.js";import{b as z,s as me,a as Xs,L as St}from"./LineChart-D-Uu3kL0.js";import{t as H,g as Tt,m as Js,c as pt,a as as,b as ns,e as ea}from"./en-US-9SRVm7yB.js";import{e as vt,d as Ce}from"./endOfMonth-93QfFfxB.js";import{a as Q}from"./addMonths-CPL-v1oH.js";import{e as gt}from"./endOfWeek-Pim0fGCe.js";import{C as rs}from"./chevron-left-DkowiYxd.js";import{a as lt,A as ta,D as sa,b as aa,c as na,d as Ot,F as ra,B as ve}from"./Header-HmO9KIvP.js";import{D as Re,a as Ae,b as Fe,c as We,d as Ee,e as ct,f as ia}from"./dialog-BkbRhY2O.js";import{h as oa,R as la,u as ca,F as da}from"./index-ZMpGrT0S.js";import{T as he,C as ua}from"./target-7abParum.js";import{T as $e}from"./trending-up-CZSEG5Sb.js";import{L as ma}from"./link-D4lgC82f.js";import{C as dt}from"./clock-Od4KD6Fc.js";import{C as Ne}from"./calendar-Ck4F2mgv.js";import{P as It}from"./plus-CIrJHrh4.js";import{L as ha}from"./list-checks-9ijXefDl.js";import{C as Rt}from"./check-CPyQFfyd.js";import{T as is,a as os,b as xe,c as Ge}from"./tabs-DZkkmdmK.js";import{R as Ue,q as At,T as Ke,o as xa,X as fa,Y as pa,p as va}from"./generateCategoricalChart-CFBGWCRH.js";import{P as Ft,a as Wt}from"./PieChart-PYX3tuHq.js";import{e as Et,E as ga}from"./eachDayOfInterval-D7CfGF_P.js";import{A as Lt,a as Ve,b as qe,c as Qe}from"./accordion-C_vhZxL6.js";import{C as ja}from"./checkbox-CpzJVwUi.js";import{C as Te}from"./circle-plus-C1yyTLEf.js";import{C as Oe}from"./circle-check-big-D7NcmSYY.js";import"./utils-km2FGkQ4.js";import"./label-DKKVfa8V.js";import"./index-epKMAjhH.js";import"./chevron-down-JR_7gpC-.js";import"./index-pLghM4Oe.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=Os("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);function ut(t,s){const a=s*7;return z(t,a)}function ya(t,s){return Q(t,s*12)}function Na(t){let s;return t.forEach(function(a){const n=H(a);(s===void 0||s<n||isNaN(Number(n)))&&(s=n)}),s||new Date(NaN)}function wa(t){let s;return t.forEach(a=>{const n=H(a);(!s||s>n||isNaN(+n))&&(s=n)}),s||new Date(NaN)}function G(t,s){const a=Ye(t),n=Ye(s);return+a==+n}function Ca(t,s,a){const n=we(t,a),r=we(s,a),i=+n-Tt(n),l=+r-Tt(r);return Math.round((i-l)/Js)}function U(t){const s=H(t);return s.setDate(1),s.setHours(0,0,0,0),s}function ls(t){return gt(t,{weekStartsOn:1})}function Da(t){const s=H(t),a=s.getFullYear(),n=s.getMonth(),r=pt(t,0);return r.setFullYear(a,n+1,0),r.setHours(0,0,0,0),r.getDate()}function Ma(t){return Math.trunc(+H(t)/1e3)}function ka(t){const s=H(t),a=s.getMonth();return s.setFullYear(s.getFullYear(),a+1,0),s.setHours(0,0,0,0),s}function _a(t,s){return Ca(ka(t),U(t),s)+1}function mt(t,s){const a=H(t),n=H(s);return a.getTime()>n.getTime()}function cs(t,s){const a=H(t),n=H(s);return+a<+n}function jt(t,s){const a=H(t),n=H(s);return a.getFullYear()===n.getFullYear()&&a.getMonth()===n.getMonth()}function Pa(t,s){const a=H(t),n=H(s);return a.getFullYear()===n.getFullYear()}function Ze(t,s){const n=Ia(t);let r;if(n.date){const c=Ra(n.date,2);r=Aa(c.restDateString,c.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);const i=r.getTime();let l=0,o;if(n.time&&(l=Fa(n.time),isNaN(l)))return new Date(NaN);if(n.timezone){if(o=Wa(n.timezone),isNaN(o))return new Date(NaN)}else{const c=new Date(i+l),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(i+l+o)}const Ie={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Sa=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ta=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Oa=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Ia(t){const s={},a=t.split(Ie.dateTimeDelimiter);let n;if(a.length>2)return s;if(/:/.test(a[0])?n=a[0]:(s.date=a[0],n=a[1],Ie.timeZoneDelimiter.test(s.date)&&(s.date=t.split(Ie.timeZoneDelimiter)[0],n=t.substr(s.date.length,t.length))),n){const r=Ie.timezone.exec(n);r?(s.time=n.replace(r[1],""),s.timezone=r[1]):s.time=n}return s}function Ra(t,s){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+s)+"})|(\\d{2}|[+-]\\d{"+(2+s)+"})$)"),n=t.match(a);if(!n)return{year:NaN,restDateString:""};const r=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?r:i*100,restDateString:t.slice((n[1]||n[2]).length)}}function Aa(t,s){if(s===null)return new Date(NaN);const a=t.match(Sa);if(!a)return new Date(NaN);const n=!!a[4],r=ge(a[1]),i=ge(a[2])-1,l=ge(a[3]),o=ge(a[4]),c=ge(a[5])-1;if(n)return Ba(s,o,c)?Ea(s,o,c):new Date(NaN);{const d=new Date(0);return!Ya(s,i,l)||!$a(s,r)?new Date(NaN):(d.setUTCFullYear(s,i,Math.max(r,l)),d)}}function ge(t){return t?parseInt(t):1}function Fa(t){const s=t.match(Ta);if(!s)return NaN;const a=Xe(s[1]),n=Xe(s[2]),r=Xe(s[3]);return Ha(a,n,r)?a*as+n*ns+r*1e3:NaN}function Xe(t){return t&&parseFloat(t.replace(",","."))||0}function Wa(t){if(t==="Z")return 0;const s=t.match(Oa);if(!s)return 0;const a=s[1]==="+"?-1:1,n=parseInt(s[2]),r=s[3]&&parseInt(s[3])||0;return za(n,r)?a*(n*as+r*ns):NaN}function Ea(t,s,a){const n=new Date(0);n.setUTCFullYear(t,0,4);const r=n.getUTCDay()||7,i=(s-1)*7+a+1-r;return n.setUTCDate(n.getUTCDate()+i),n}const La=[31,null,31,30,31,30,31,31,30,31,30,31];function ds(t){return t%400===0||t%4===0&&t%100!==0}function Ya(t,s,a){return s>=0&&s<=11&&a>=1&&a<=(La[s]||(ds(t)?29:28))}function $a(t,s){return s>=1&&s<=(ds(t)?366:365)}function Ba(t,s,a){return s>=1&&s<=53&&a>=0&&a<=6}function Ha(t,s,a){return t===24?s===0&&a===0:a>=0&&a<60&&s>=0&&s<60&&t>=0&&t<25}function za(t,s){return s>=0&&s<=59}function Je(t,s){const a=H(t),n=a.getFullYear(),r=a.getDate(),i=pt(t,0);i.setFullYear(n,s,15),i.setHours(0,0,0,0);const l=Da(i);return a.setMonth(s,Math.min(r,l)),a}function Yt(t,s){const a=H(t);return isNaN(+a)?pt(t,NaN):(a.setFullYear(s),a)}var w=function(){return w=Object.assign||function(s){for(var a,n=1,r=arguments.length;n<r;n++){a=arguments[n];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(s[i]=a[i])}return s},w.apply(this,arguments)};function Ga(t,s){var a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)s.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(a[n[r]]=t[n[r]]);return a}function us(t,s,a){for(var n=0,r=s.length,i;n<r;n++)(i||!(n in s))&&(i||(i=Array.prototype.slice.call(s,0,n)),i[n]=s[n]);return t.concat(i||Array.prototype.slice.call(s))}function De(t){return t.mode==="multiple"}function Me(t){return t.mode==="range"}function He(t){return t.mode==="single"}var Ua={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Ka(t,s){return R(t,"LLLL y",s)}function Va(t,s){return R(t,"d",s)}function qa(t,s){return R(t,"LLLL",s)}function Qa(t){return"".concat(t)}function Za(t,s){return R(t,"cccccc",s)}function Xa(t,s){return R(t,"yyyy",s)}var Ja=Object.freeze({__proto__:null,formatCaption:Ka,formatDay:Va,formatMonthCaption:qa,formatWeekNumber:Qa,formatWeekdayName:Za,formatYearCaption:Xa}),en=function(t,s,a){return R(t,"do MMMM (EEEE)",a)},tn=function(){return"Month: "},sn=function(){return"Go to next month"},an=function(){return"Go to previous month"},nn=function(t,s){return R(t,"cccc",s)},rn=function(t){return"Week n. ".concat(t)},on=function(){return"Year: "},ln=Object.freeze({__proto__:null,labelDay:en,labelMonthDropdown:tn,labelNext:sn,labelPrevious:an,labelWeekNumber:rn,labelWeekday:nn,labelYearDropdown:on});function cn(){var t="buttons",s=Ua,a=ea,n={},r={},i=1,l={},o=new Date;return{captionLayout:t,classNames:s,formatters:Ja,labels:ln,locale:a,modifiersClassNames:n,modifiers:r,numberOfMonths:i,styles:l,today:o,mode:"default"}}function dn(t){var s=t.fromYear,a=t.toYear,n=t.fromMonth,r=t.toMonth,i=t.fromDate,l=t.toDate;return n?i=U(n):s&&(i=new Date(s,0,1)),r?l=vt(r):a&&(l=new Date(a,11,31)),{fromDate:i?Ye(i):void 0,toDate:l?Ye(l):void 0}}var ms=b.createContext(void 0);function un(t){var s,a=t.initialProps,n=cn(),r=dn(a),i=r.fromDate,l=r.toDate,o=(s=a.captionLayout)!==null&&s!==void 0?s:n.captionLayout;o!=="buttons"&&(!i||!l)&&(o="buttons");var c;(He(a)||De(a)||Me(a))&&(c=a.onSelect);var d=w(w(w({},n),a),{captionLayout:o,classNames:w(w({},n.classNames),a.classNames),components:w({},a.components),formatters:w(w({},n.formatters),a.formatters),fromDate:i,labels:w(w({},n.labels),a.labels),mode:a.mode||n.mode,modifiers:w(w({},n.modifiers),a.modifiers),modifiersClassNames:w(w({},n.modifiersClassNames),a.modifiersClassNames),onSelect:c,styles:w(w({},n.styles),a.styles),toDate:l});return e.jsx(ms.Provider,{value:d,children:t.children})}function M(){var t=b.useContext(ms);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function hs(t){var s=M(),a=s.locale,n=s.classNames,r=s.styles,i=s.formatters.formatCaption;return e.jsx("div",{className:n.caption_label,style:r.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:i(t.displayMonth,{locale:a})})}function mn(t){return e.jsx("svg",w({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function xs(t){var s,a,n=t.onChange,r=t.value,i=t.children,l=t.caption,o=t.className,c=t.style,d=M(),h=(a=(s=d.components)===null||s===void 0?void 0:s.IconDropdown)!==null&&a!==void 0?a:mn;return e.jsxs("div",{className:o,style:c,children:[e.jsx("span",{className:d.classNames.vhidden,children:t["aria-label"]}),e.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:r,onChange:n,children:i}),e.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[l,e.jsx(h,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function hn(t){var s,a=M(),n=a.fromDate,r=a.toDate,i=a.styles,l=a.locale,o=a.formatters.formatMonthCaption,c=a.classNames,d=a.components,h=a.labels.labelMonthDropdown;if(!n)return e.jsx(e.Fragment,{});if(!r)return e.jsx(e.Fragment,{});var x=[];if(Pa(n,r))for(var v=U(n),p=n.getMonth();p<=r.getMonth();p++)x.push(Je(v,p));else for(var v=U(new Date),p=0;p<=11;p++)x.push(Je(v,p));var u=function(f){var N=Number(f.target.value),D=Je(U(t.displayMonth),N);t.onChange(D)},j=(s=d==null?void 0:d.Dropdown)!==null&&s!==void 0?s:xs;return e.jsx(j,{name:"months","aria-label":h(),className:c.dropdown_month,style:i.dropdown_month,onChange:u,value:t.displayMonth.getMonth(),caption:o(t.displayMonth,{locale:l}),children:x.map(function(f){return e.jsx("option",{value:f.getMonth(),children:o(f,{locale:l})},f.getMonth())})})}function xn(t){var s,a=t.displayMonth,n=M(),r=n.fromDate,i=n.toDate,l=n.locale,o=n.styles,c=n.classNames,d=n.components,h=n.formatters.formatYearCaption,x=n.labels.labelYearDropdown,v=[];if(!r)return e.jsx(e.Fragment,{});if(!i)return e.jsx(e.Fragment,{});for(var p=r.getFullYear(),u=i.getFullYear(),j=p;j<=u;j++)v.push(Yt(qs(new Date),j));var f=function(D){var W=Yt(U(a),Number(D.target.value));t.onChange(W)},N=(s=d==null?void 0:d.Dropdown)!==null&&s!==void 0?s:xs;return e.jsx(N,{name:"years","aria-label":x(),className:c.dropdown_year,style:o.dropdown_year,onChange:f,value:a.getFullYear(),caption:h(a,{locale:l}),children:v.map(function(D){return e.jsx("option",{value:D.getFullYear(),children:h(D,{locale:l})},D.getFullYear())})})}function fn(t,s){var a=b.useState(t),n=a[0],r=a[1],i=s===void 0?n:s;return[i,r]}function pn(t){var s=t.month,a=t.defaultMonth,n=t.today,r=s||a||n||new Date,i=t.toDate,l=t.fromDate,o=t.numberOfMonths,c=o===void 0?1:o;if(i&&Ce(i,r)<0){var d=-1*(c-1);r=Q(i,d)}return l&&Ce(r,l)<0&&(r=l),U(r)}function vn(){var t=M(),s=pn(t),a=fn(s,t.month),n=a[0],r=a[1],i=function(l){var o;if(!t.disableNavigation){var c=U(l);r(c),(o=t.onMonthChange)===null||o===void 0||o.call(t,c)}};return[n,i]}function gn(t,s){for(var a=s.reverseMonths,n=s.numberOfMonths,r=U(t),i=U(Q(r,n)),l=Ce(i,r),o=[],c=0;c<l;c++){var d=Q(r,c);o.push(d)}return a&&(o=o.reverse()),o}function jn(t,s){if(!s.disableNavigation){var a=s.toDate,n=s.pagedNavigation,r=s.numberOfMonths,i=r===void 0?1:r,l=n?i:1,o=U(t);if(!a)return Q(o,l);var c=Ce(a,t);if(!(c<i))return Q(o,l)}}function bn(t,s){if(!s.disableNavigation){var a=s.fromDate,n=s.pagedNavigation,r=s.numberOfMonths,i=r===void 0?1:r,l=n?i:1,o=U(t);if(!a)return Q(o,-l);var c=Ce(o,a);if(!(c<=0))return Q(o,-l)}}var fs=b.createContext(void 0);function yn(t){var s=M(),a=vn(),n=a[0],r=a[1],i=gn(n,s),l=jn(n,s),o=bn(n,s),c=function(x){return i.some(function(v){return jt(x,v)})},d=function(x,v){c(x)||(v&&cs(x,v)?r(Q(x,1+s.numberOfMonths*-1)):r(x))},h={currentMonth:n,displayMonths:i,goToMonth:r,goToDate:d,previousMonth:o,nextMonth:l,isDateDisplayed:c};return e.jsx(fs.Provider,{value:h,children:t.children})}function ke(){var t=b.useContext(fs);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function $t(t){var s,a=M(),n=a.classNames,r=a.styles,i=a.components,l=ke().goToMonth,o=function(h){l(Q(h,t.displayIndex?-t.displayIndex:0))},c=(s=i==null?void 0:i.CaptionLabel)!==null&&s!==void 0?s:hs,d=e.jsx(c,{id:t.id,displayMonth:t.displayMonth});return e.jsxs("div",{className:n.caption_dropdowns,style:r.caption_dropdowns,children:[e.jsx("div",{className:n.vhidden,children:d}),e.jsx(hn,{onChange:o,displayMonth:t.displayMonth}),e.jsx(xn,{onChange:o,displayMonth:t.displayMonth})]})}function Nn(t){return e.jsx("svg",w({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function wn(t){return e.jsx("svg",w({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Be=b.forwardRef(function(t,s){var a=M(),n=a.classNames,r=a.styles,i=[n.button_reset,n.button];t.className&&i.push(t.className);var l=i.join(" "),o=w(w({},r.button_reset),r.button);return t.style&&Object.assign(o,t.style),e.jsx("button",w({},t,{ref:s,type:"button",className:l,style:o}))});function Cn(t){var s,a,n=M(),r=n.dir,i=n.locale,l=n.classNames,o=n.styles,c=n.labels,d=c.labelPrevious,h=c.labelNext,x=n.components;if(!t.nextMonth&&!t.previousMonth)return e.jsx(e.Fragment,{});var v=d(t.previousMonth,{locale:i}),p=[l.nav_button,l.nav_button_previous].join(" "),u=h(t.nextMonth,{locale:i}),j=[l.nav_button,l.nav_button_next].join(" "),f=(s=x==null?void 0:x.IconRight)!==null&&s!==void 0?s:wn,N=(a=x==null?void 0:x.IconLeft)!==null&&a!==void 0?a:Nn;return e.jsxs("div",{className:l.nav,style:o.nav,children:[!t.hidePrevious&&e.jsx(Be,{name:"previous-month","aria-label":v,className:p,style:o.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:r==="rtl"?e.jsx(f,{className:l.nav_icon,style:o.nav_icon}):e.jsx(N,{className:l.nav_icon,style:o.nav_icon})}),!t.hideNext&&e.jsx(Be,{name:"next-month","aria-label":u,className:j,style:o.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:r==="rtl"?e.jsx(N,{className:l.nav_icon,style:o.nav_icon}):e.jsx(f,{className:l.nav_icon,style:o.nav_icon})})]})}function Bt(t){var s=M().numberOfMonths,a=ke(),n=a.previousMonth,r=a.nextMonth,i=a.goToMonth,l=a.displayMonths,o=l.findIndex(function(u){return jt(t.displayMonth,u)}),c=o===0,d=o===l.length-1,h=s>1&&(c||!d),x=s>1&&(d||!c),v=function(){n&&i(n)},p=function(){r&&i(r)};return e.jsx(Cn,{displayMonth:t.displayMonth,hideNext:h,hidePrevious:x,nextMonth:r,previousMonth:n,onPreviousClick:v,onNextClick:p})}function Dn(t){var s,a=M(),n=a.classNames,r=a.disableNavigation,i=a.styles,l=a.captionLayout,o=a.components,c=(s=o==null?void 0:o.CaptionLabel)!==null&&s!==void 0?s:hs,d;return r?d=e.jsx(c,{id:t.id,displayMonth:t.displayMonth}):l==="dropdown"?d=e.jsx($t,{displayMonth:t.displayMonth,id:t.id}):l==="dropdown-buttons"?d=e.jsxs(e.Fragment,{children:[e.jsx($t,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),e.jsx(Bt,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):d=e.jsxs(e.Fragment,{children:[e.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(Bt,{displayMonth:t.displayMonth,id:t.id})]}),e.jsx("div",{className:n.caption,style:i.caption,children:d})}function Mn(t){var s=M(),a=s.footer,n=s.styles,r=s.classNames.tfoot;return a?e.jsx("tfoot",{className:r,style:n.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:a})})}):e.jsx(e.Fragment,{})}function kn(t,s,a){for(var n=a?ft(new Date):we(new Date,{locale:t,weekStartsOn:s}),r=[],i=0;i<7;i++){var l=z(n,i);r.push(l)}return r}function _n(){var t=M(),s=t.classNames,a=t.styles,n=t.showWeekNumber,r=t.locale,i=t.weekStartsOn,l=t.ISOWeek,o=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,d=kn(r,i,l);return e.jsxs("tr",{style:a.head_row,className:s.head_row,children:[n&&e.jsx("td",{style:a.head_cell,className:s.head_cell}),d.map(function(h,x){return e.jsx("th",{scope:"col",className:s.head_cell,style:a.head_cell,"aria-label":c(h,{locale:r}),children:o(h,{locale:r})},x)})]})}function Pn(){var t,s=M(),a=s.classNames,n=s.styles,r=s.components,i=(t=r==null?void 0:r.HeadRow)!==null&&t!==void 0?t:_n;return e.jsx("thead",{style:n.head,className:a.head,children:e.jsx(i,{})})}function Sn(t){var s=M(),a=s.locale,n=s.formatters.formatDay;return e.jsx(e.Fragment,{children:n(t.date,{locale:a})})}var bt=b.createContext(void 0);function Tn(t){if(!De(t.initialProps)){var s={selected:void 0,modifiers:{disabled:[]}};return e.jsx(bt.Provider,{value:s,children:t.children})}return e.jsx(On,{initialProps:t.initialProps,children:t.children})}function On(t){var s=t.initialProps,a=t.children,n=s.selected,r=s.min,i=s.max,l=function(d,h,x){var v,p;(v=s.onDayClick)===null||v===void 0||v.call(s,d,h,x);var u=!!(h.selected&&r&&(n==null?void 0:n.length)===r);if(!u){var j=!!(!h.selected&&i&&(n==null?void 0:n.length)===i);if(!j){var f=n?us([],n):[];if(h.selected){var N=f.findIndex(function(D){return G(d,D)});f.splice(N,1)}else f.push(d);(p=s.onSelect)===null||p===void 0||p.call(s,f,d,h,x)}}},o={disabled:[]};n&&o.disabled.push(function(d){var h=i&&n.length>i-1,x=n.some(function(v){return G(v,d)});return!!(h&&!x)});var c={selected:n,onDayClick:l,modifiers:o};return e.jsx(bt.Provider,{value:c,children:a})}function yt(){var t=b.useContext(bt);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function In(t,s){var a=s||{},n=a.from,r=a.to;return n&&r?G(r,t)&&G(n,t)?void 0:G(r,t)?{from:r,to:void 0}:G(n,t)?void 0:mt(n,t)?{from:t,to:r}:{from:n,to:t}:r?mt(t,r)?{from:r,to:t}:{from:t,to:r}:n?cs(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var Nt=b.createContext(void 0);function Rn(t){if(!Me(t.initialProps)){var s={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx(Nt.Provider,{value:s,children:t.children})}return e.jsx(An,{initialProps:t.initialProps,children:t.children})}function An(t){var s=t.initialProps,a=t.children,n=s.selected,r=n||{},i=r.from,l=r.to,o=s.min,c=s.max,d=function(p,u,j){var f,N;(f=s.onDayClick)===null||f===void 0||f.call(s,p,u,j);var D=In(p,n);(N=s.onSelect)===null||N===void 0||N.call(s,D,p,u,j)},h={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(h.range_start=[i],l?(h.range_end=[l],G(i,l)||(h.range_middle=[{after:i,before:l}])):h.range_end=[i]):l&&(h.range_start=[l],h.range_end=[l]),o&&(i&&!l&&h.disabled.push({after:me(i,o-1),before:z(i,o-1)}),i&&l&&h.disabled.push({after:i,before:z(i,o-1)}),!i&&l&&h.disabled.push({after:me(l,o-1),before:z(l,o-1)})),c){if(i&&!l&&(h.disabled.push({before:z(i,-c+1)}),h.disabled.push({after:z(i,c-1)})),i&&l){var x=se(l,i)+1,v=c-x;h.disabled.push({before:me(i,v)}),h.disabled.push({after:z(l,v)})}!i&&l&&(h.disabled.push({before:z(l,-c+1)}),h.disabled.push({after:z(l,c-1)}))}return e.jsx(Nt.Provider,{value:{selected:n,onDayClick:d,modifiers:h},children:a})}function wt(){var t=b.useContext(Nt);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Le(t){return Array.isArray(t)?us([],t):t!==void 0?[t]:[]}function Fn(t){var s={};return Object.entries(t).forEach(function(a){var n=a[0],r=a[1];s[n]=Le(r)}),s}var Z;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Z||(Z={}));var Wn=Z.Selected,te=Z.Disabled,En=Z.Hidden,Ln=Z.Today,et=Z.RangeEnd,tt=Z.RangeMiddle,st=Z.RangeStart,Yn=Z.Outside;function $n(t,s,a){var n,r=(n={},n[Wn]=Le(t.selected),n[te]=Le(t.disabled),n[En]=Le(t.hidden),n[Ln]=[t.today],n[et]=[],n[tt]=[],n[st]=[],n[Yn]=[],n);return t.fromDate&&r[te].push({before:t.fromDate}),t.toDate&&r[te].push({after:t.toDate}),De(t)?r[te]=r[te].concat(s.modifiers[te]):Me(t)&&(r[te]=r[te].concat(a.modifiers[te]),r[st]=a.modifiers[st],r[tt]=a.modifiers[tt],r[et]=a.modifiers[et]),r}var ps=b.createContext(void 0);function Bn(t){var s=M(),a=yt(),n=wt(),r=$n(s,a,n),i=Fn(s.modifiers),l=w(w({},r),i);return e.jsx(ps.Provider,{value:l,children:t.children})}function vs(){var t=b.useContext(ps);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function Hn(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function zn(t){return!!(t&&typeof t=="object"&&"from"in t)}function Gn(t){return!!(t&&typeof t=="object"&&"after"in t)}function Un(t){return!!(t&&typeof t=="object"&&"before"in t)}function Kn(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Vn(t,s){var a,n=s.from,r=s.to;if(n&&r){var i=se(r,n)<0;i&&(a=[r,n],n=a[0],r=a[1]);var l=se(t,n)>=0&&se(r,t)>=0;return l}return r?G(r,t):n?G(n,t):!1}function qn(t){return ss(t)}function Qn(t){return Array.isArray(t)&&t.every(ss)}function Zn(t,s){return s.some(function(a){if(typeof a=="boolean")return a;if(qn(a))return G(t,a);if(Qn(a))return a.includes(t);if(zn(a))return Vn(t,a);if(Kn(a))return a.dayOfWeek.includes(t.getDay());if(Hn(a)){var n=se(a.before,t),r=se(a.after,t),i=n>0,l=r<0,o=mt(a.before,a.after);return o?l&&i:i||l}return Gn(a)?se(t,a.after)>0:Un(a)?se(a.before,t)>0:typeof a=="function"?a(t):!1})}function Ct(t,s,a){var n=Object.keys(s).reduce(function(i,l){var o=s[l];return Zn(t,o)&&i.push(l),i},[]),r={};return n.forEach(function(i){return r[i]=!0}),a&&!jt(t,a)&&(r.outside=!0),r}function Xn(t,s){for(var a=U(t[0]),n=vt(t[t.length-1]),r,i,l=a;l<=n;){var o=Ct(l,s),c=!o.disabled&&!o.hidden;if(!c){l=z(l,1);continue}if(o.selected)return l;o.today&&!i&&(i=l),r||(r=l),l=z(l,1)}return i||r}var Jn=365;function gs(t,s){var a=s.moveBy,n=s.direction,r=s.context,i=s.modifiers,l=s.retry,o=l===void 0?{count:0,lastFocused:t}:l,c=r.weekStartsOn,d=r.fromDate,h=r.toDate,x=r.locale,v={day:z,week:ut,month:Q,year:ya,startOfWeek:function(f){return r.ISOWeek?ft(f):we(f,{locale:x,weekStartsOn:c})},endOfWeek:function(f){return r.ISOWeek?ls(f):gt(f,{locale:x,weekStartsOn:c})}},p=v[a](t,n==="after"?1:-1);n==="before"&&d?p=Na([d,p]):n==="after"&&h&&(p=wa([h,p]));var u=!0;if(i){var j=Ct(p,i);u=!j.disabled&&!j.hidden}return u?p:o.count>Jn?o.lastFocused:gs(p,{moveBy:a,direction:n,context:r,modifiers:i,retry:w(w({},o),{count:o.count+1})})}var js=b.createContext(void 0);function er(t){var s=ke(),a=vs(),n=b.useState(),r=n[0],i=n[1],l=b.useState(),o=l[0],c=l[1],d=Xn(s.displayMonths,a),h=r??(o&&s.isDateDisplayed(o))?o:d,x=function(){c(r),i(void 0)},v=function(f){i(f)},p=M(),u=function(f,N){if(r){var D=gs(r,{moveBy:f,direction:N,context:p,modifiers:a});G(r,D)||(s.goToDate(D,r),v(D))}},j={focusedDay:r,focusTarget:h,blur:x,focus:v,focusDayAfter:function(){return u("day","after")},focusDayBefore:function(){return u("day","before")},focusWeekAfter:function(){return u("week","after")},focusWeekBefore:function(){return u("week","before")},focusMonthBefore:function(){return u("month","before")},focusMonthAfter:function(){return u("month","after")},focusYearBefore:function(){return u("year","before")},focusYearAfter:function(){return u("year","after")},focusStartOfWeek:function(){return u("startOfWeek","before")},focusEndOfWeek:function(){return u("endOfWeek","after")}};return e.jsx(js.Provider,{value:j,children:t.children})}function Dt(){var t=b.useContext(js);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function tr(t,s){var a=vs(),n=Ct(t,a,s);return n}var Mt=b.createContext(void 0);function sr(t){if(!He(t.initialProps)){var s={selected:void 0};return e.jsx(Mt.Provider,{value:s,children:t.children})}return e.jsx(ar,{initialProps:t.initialProps,children:t.children})}function ar(t){var s=t.initialProps,a=t.children,n=function(i,l,o){var c,d,h;if((c=s.onDayClick)===null||c===void 0||c.call(s,i,l,o),l.selected&&!s.required){(d=s.onSelect)===null||d===void 0||d.call(s,void 0,i,l,o);return}(h=s.onSelect)===null||h===void 0||h.call(s,i,i,l,o)},r={selected:s.selected,onDayClick:n};return e.jsx(Mt.Provider,{value:r,children:a})}function bs(){var t=b.useContext(Mt);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function nr(t,s){var a=M(),n=bs(),r=yt(),i=wt(),l=Dt(),o=l.focusDayAfter,c=l.focusDayBefore,d=l.focusWeekAfter,h=l.focusWeekBefore,x=l.blur,v=l.focus,p=l.focusMonthBefore,u=l.focusMonthAfter,j=l.focusYearBefore,f=l.focusYearAfter,N=l.focusStartOfWeek,D=l.focusEndOfWeek,W=function(g){var y,pe,ie,ze;He(a)?(y=n.onDayClick)===null||y===void 0||y.call(n,t,s,g):De(a)?(pe=r.onDayClick)===null||pe===void 0||pe.call(r,t,s,g):Me(a)?(ie=i.onDayClick)===null||ie===void 0||ie.call(i,t,s,g):(ze=a.onDayClick)===null||ze===void 0||ze.call(a,t,s,g)},ne=function(g){var y;v(t),(y=a.onDayFocus)===null||y===void 0||y.call(a,t,s,g)},X=function(g){var y;x(),(y=a.onDayBlur)===null||y===void 0||y.call(a,t,s,g)},P=function(g){var y;(y=a.onDayMouseEnter)===null||y===void 0||y.call(a,t,s,g)},J=function(g){var y;(y=a.onDayMouseLeave)===null||y===void 0||y.call(a,t,s,g)},C=function(g){var y;(y=a.onDayPointerEnter)===null||y===void 0||y.call(a,t,s,g)},k=function(g){var y;(y=a.onDayPointerLeave)===null||y===void 0||y.call(a,t,s,g)},q=function(g){var y;(y=a.onDayTouchCancel)===null||y===void 0||y.call(a,t,s,g)},oe=function(g){var y;(y=a.onDayTouchEnd)===null||y===void 0||y.call(a,t,s,g)},re=function(g){var y;(y=a.onDayTouchMove)===null||y===void 0||y.call(a,t,s,g)},le=function(g){var y;(y=a.onDayTouchStart)===null||y===void 0||y.call(a,t,s,g)},Pe=function(g){var y;(y=a.onDayKeyUp)===null||y===void 0||y.call(a,t,s,g)},m=function(g){var y;switch(g.key){case"ArrowLeft":g.preventDefault(),g.stopPropagation(),a.dir==="rtl"?o():c();break;case"ArrowRight":g.preventDefault(),g.stopPropagation(),a.dir==="rtl"?c():o();break;case"ArrowDown":g.preventDefault(),g.stopPropagation(),d();break;case"ArrowUp":g.preventDefault(),g.stopPropagation(),h();break;case"PageUp":g.preventDefault(),g.stopPropagation(),g.shiftKey?j():p();break;case"PageDown":g.preventDefault(),g.stopPropagation(),g.shiftKey?f():u();break;case"Home":g.preventDefault(),g.stopPropagation(),N();break;case"End":g.preventDefault(),g.stopPropagation(),D();break}(y=a.onDayKeyDown)===null||y===void 0||y.call(a,t,s,g)},_={onClick:W,onFocus:ne,onBlur:X,onKeyDown:m,onKeyUp:Pe,onMouseEnter:P,onMouseLeave:J,onPointerEnter:C,onPointerLeave:k,onTouchCancel:q,onTouchEnd:oe,onTouchMove:re,onTouchStart:le};return _}function rr(){var t=M(),s=bs(),a=yt(),n=wt(),r=He(t)?s.selected:De(t)?a.selected:Me(t)?n.selected:void 0;return r}function ir(t){return Object.values(Z).includes(t)}function or(t,s){var a=[t.classNames.day];return Object.keys(s).forEach(function(n){var r=t.modifiersClassNames[n];if(r)a.push(r);else if(ir(n)){var i=t.classNames["day_".concat(n)];i&&a.push(i)}}),a}function lr(t,s){var a=w({},t.styles.day);return Object.keys(s).forEach(function(n){var r;a=w(w({},a),(r=t.modifiersStyles)===null||r===void 0?void 0:r[n])}),a}function cr(t,s,a){var n,r,i,l=M(),o=Dt(),c=tr(t,s),d=nr(t,c),h=rr(),x=!!(l.onDayClick||l.mode!=="default");b.useEffect(function(){var P;c.outside||o.focusedDay&&x&&G(o.focusedDay,t)&&((P=a.current)===null||P===void 0||P.focus())},[o.focusedDay,t,a,x,c.outside]);var v=or(l,c).join(" "),p=lr(l,c),u=!!(c.outside&&!l.showOutsideDays||c.hidden),j=(i=(r=l.components)===null||r===void 0?void 0:r.DayContent)!==null&&i!==void 0?i:Sn,f=e.jsx(j,{date:t,displayMonth:s,activeModifiers:c}),N={style:p,className:v,children:f,role:"gridcell"},D=o.focusTarget&&G(o.focusTarget,t)&&!c.outside,W=o.focusedDay&&G(o.focusedDay,t),ne=w(w(w({},N),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=W||D?0:-1,n)),d),X={isButton:x,isHidden:u,activeModifiers:c,selectedDays:h,buttonProps:ne,divProps:N};return X}function dr(t){var s=b.useRef(null),a=cr(t.date,t.displayMonth,s);return a.isHidden?e.jsx("div",{role:"gridcell"}):a.isButton?e.jsx(Be,w({name:"day",ref:s},a.buttonProps)):e.jsx("div",w({},a.divProps))}function ur(t){var s=t.number,a=t.dates,n=M(),r=n.onWeekNumberClick,i=n.styles,l=n.classNames,o=n.locale,c=n.labels.labelWeekNumber,d=n.formatters.formatWeekNumber,h=d(Number(s),{locale:o});if(!r)return e.jsx("span",{className:l.weeknumber,style:i.weeknumber,children:h});var x=c(Number(s),{locale:o}),v=function(p){r(s,a,p)};return e.jsx(Be,{name:"week-number","aria-label":x,className:l.weeknumber,style:i.weeknumber,onClick:v,children:h})}function mr(t){var s,a,n=M(),r=n.styles,i=n.classNames,l=n.showWeekNumber,o=n.components,c=(s=o==null?void 0:o.Day)!==null&&s!==void 0?s:dr,d=(a=o==null?void 0:o.WeekNumber)!==null&&a!==void 0?a:ur,h;return l&&(h=e.jsx("td",{className:i.cell,style:r.cell,children:e.jsx(d,{number:t.weekNumber,dates:t.dates})})),e.jsxs("tr",{className:i.row,style:r.row,children:[h,t.dates.map(function(x){return e.jsx("td",{className:i.cell,style:r.cell,role:"presentation",children:e.jsx(c,{displayMonth:t.displayMonth,date:x})},Ma(x))})]})}function Ht(t,s,a){for(var n=a!=null&&a.ISOWeek?ls(s):gt(s,a),r=a!=null&&a.ISOWeek?ft(t):we(t,a),i=se(n,r),l=[],o=0;o<=i;o++)l.push(z(r,o));var c=l.reduce(function(d,h){var x=a!=null&&a.ISOWeek?Qs(h):Zs(h,a),v=d.find(function(p){return p.weekNumber===x});return v?(v.dates.push(h),d):(d.push({weekNumber:x,dates:[h]}),d)},[]);return c}function hr(t,s){var a=Ht(U(t),vt(t),s);if(s!=null&&s.useFixedWeeks){var n=_a(t,s);if(n<6){var r=a[a.length-1],i=r.dates[r.dates.length-1],l=ut(i,6-n),o=Ht(ut(i,1),l,s);a.push.apply(a,o)}}return a}function xr(t){var s,a,n,r=M(),i=r.locale,l=r.classNames,o=r.styles,c=r.hideHead,d=r.fixedWeeks,h=r.components,x=r.weekStartsOn,v=r.firstWeekContainsDate,p=r.ISOWeek,u=hr(t.displayMonth,{useFixedWeeks:!!d,ISOWeek:p,locale:i,weekStartsOn:x,firstWeekContainsDate:v}),j=(s=h==null?void 0:h.Head)!==null&&s!==void 0?s:Pn,f=(a=h==null?void 0:h.Row)!==null&&a!==void 0?a:mr,N=(n=h==null?void 0:h.Footer)!==null&&n!==void 0?n:Mn;return e.jsxs("table",{id:t.id,className:l.table,style:o.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&e.jsx(j,{}),e.jsx("tbody",{className:l.tbody,style:o.tbody,children:u.map(function(D){return e.jsx(f,{displayMonth:t.displayMonth,dates:D.dates,weekNumber:D.weekNumber},D.weekNumber)})}),e.jsx(N,{displayMonth:t.displayMonth})]})}function fr(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var pr=fr()?b.useLayoutEffect:b.useEffect,at=!1,vr=0;function zt(){return"react-day-picker-".concat(++vr)}function gr(t){var s,a=t??(at?zt():null),n=b.useState(a),r=n[0],i=n[1];return pr(function(){r===null&&i(zt())},[]),b.useEffect(function(){at===!1&&(at=!0)},[]),(s=t??r)!==null&&s!==void 0?s:void 0}function jr(t){var s,a,n=M(),r=n.dir,i=n.classNames,l=n.styles,o=n.components,c=ke().displayMonths,d=gr(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),h=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,x=[i.month],v=l.month,p=t.displayIndex===0,u=t.displayIndex===c.length-1,j=!p&&!u;r==="rtl"&&(s=[p,u],u=s[0],p=s[1]),p&&(x.push(i.caption_start),v=w(w({},v),l.caption_start)),u&&(x.push(i.caption_end),v=w(w({},v),l.caption_end)),j&&(x.push(i.caption_between),v=w(w({},v),l.caption_between));var f=(a=o==null?void 0:o.Caption)!==null&&a!==void 0?a:Dn;return e.jsxs("div",{className:x.join(" "),style:v,children:[e.jsx(f,{id:d,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(xr,{id:h,"aria-labelledby":d,displayMonth:t.displayMonth})]},t.displayIndex)}function br(t){var s=M(),a=s.classNames,n=s.styles;return e.jsx("div",{className:a.months,style:n.months,children:t.children})}function yr(t){var s,a,n=t.initialProps,r=M(),i=Dt(),l=ke(),o=b.useState(!1),c=o[0],d=o[1];b.useEffect(function(){r.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))},[r.initialFocus,c,i.focus,i.focusTarget,i]);var h=[r.classNames.root,r.className];r.numberOfMonths>1&&h.push(r.classNames.multiple_months),r.showWeekNumber&&h.push(r.classNames.with_weeknumber);var x=w(w({},r.styles.root),r.style),v=Object.keys(n).filter(function(u){return u.startsWith("data-")}).reduce(function(u,j){var f;return w(w({},u),(f={},f[j]=n[j],f))},{}),p=(a=(s=n.components)===null||s===void 0?void 0:s.Months)!==null&&a!==void 0?a:br;return e.jsx("div",w({className:h.join(" "),style:x,dir:r.dir,id:r.id,nonce:n.nonce,title:n.title,lang:n.lang},v,{children:e.jsx(p,{children:l.displayMonths.map(function(u,j){return e.jsx(jr,{displayIndex:j,displayMonth:u},j)})})}))}function Nr(t){var s=t.children,a=Ga(t,["children"]);return e.jsx(un,{initialProps:a,children:e.jsx(yn,{children:e.jsx(sr,{initialProps:a,children:e.jsx(Tn,{initialProps:a,children:e.jsx(Rn,{initialProps:a,children:e.jsx(Bn,{children:e.jsx(er,{children:s})})})})})})})}function wr(t){return e.jsx(Nr,w({},t,{children:e.jsx(yr,{initialProps:t})}))}function ht({className:t,classNames:s,showOutsideDays:a=!0,...n}){return e.jsx(wr,{showOutsideDays:a,className:ce("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ce(Pt({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ce(Pt({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({className:r,...i})=>e.jsx(rs,{className:ce("h-4 w-4",r),...i}),IconRight:({className:r,...i})=>e.jsx(lt,{className:ce("h-4 w-4",r),...i})},...n})}ht.displayName="Calendar";var kt="Popover",[ys,Pi]=Is(kt,[Kt]),_e=Kt(),[Cr,ae]=ys(kt),Ns=t=>{const{__scopePopover:s,children:a,open:n,defaultOpen:r,onOpenChange:i,modal:l=!1}=t,o=_e(s),c=b.useRef(null),[d,h]=b.useState(!1),[x=!1,v]=Ws({prop:n,defaultProp:r,onChange:i});return e.jsx(Es,{...o,children:e.jsx(Cr,{scope:s,contentId:Ls(),triggerRef:c,open:x,onOpenChange:v,onOpenToggle:b.useCallback(()=>v(p=>!p),[v]),hasCustomAnchor:d,onCustomAnchorAdd:b.useCallback(()=>h(!0),[]),onCustomAnchorRemove:b.useCallback(()=>h(!1),[]),modal:l,children:a})})};Ns.displayName=kt;var ws="PopoverAnchor",Dr=b.forwardRef((t,s)=>{const{__scopePopover:a,...n}=t,r=ae(ws,a),i=_e(a),{onCustomAnchorAdd:l,onCustomAnchorRemove:o}=r;return b.useEffect(()=>(l(),()=>o()),[l,o]),e.jsx(Vt,{...i,...n,ref:s})});Dr.displayName=ws;var Cs="PopoverTrigger",Ds=b.forwardRef((t,s)=>{const{__scopePopover:a,...n}=t,r=ae(Cs,a),i=_e(a),l=qt(s,r.triggerRef),o=e.jsx(Qt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":Ss(r.open),...n,ref:l,onClick:be(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?o:e.jsx(Vt,{asChild:!0,...i,children:o})});Ds.displayName=Cs;var _t="PopoverPortal",[Mr,kr]=ys(_t,{forceMount:void 0}),Ms=t=>{const{__scopePopover:s,forceMount:a,children:n,container:r}=t,i=ae(_t,s);return e.jsx(Mr,{scope:s,forceMount:a,children:e.jsx(Zt,{present:a||i.open,children:e.jsx(Ys,{asChild:!0,container:r,children:n})})})};Ms.displayName=_t;var fe="PopoverContent",ks=b.forwardRef((t,s)=>{const a=kr(fe,t.__scopePopover),{forceMount:n=a.forceMount,...r}=t,i=ae(fe,t.__scopePopover);return e.jsx(Zt,{present:n||i.open,children:i.modal?e.jsx(Pr,{...r,ref:s}):e.jsx(Sr,{...r,ref:s})})});ks.displayName=fe;var _r=$s("PopoverContent.RemoveScroll"),Pr=b.forwardRef((t,s)=>{const a=ae(fe,t.__scopePopover),n=b.useRef(null),r=qt(s,n),i=b.useRef(!1);return b.useEffect(()=>{const l=n.current;if(l)return oa(l)},[]),e.jsx(la,{as:_r,allowPinchZoom:!0,children:e.jsx(_s,{...t,ref:r,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:be(t.onCloseAutoFocus,l=>{var o;l.preventDefault(),i.current||(o=a.triggerRef.current)==null||o.focus()}),onPointerDownOutside:be(t.onPointerDownOutside,l=>{const o=l.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,d=o.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:be(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),Sr=b.forwardRef((t,s)=>{const a=ae(fe,t.__scopePopover),n=b.useRef(!1),r=b.useRef(!1);return e.jsx(_s,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(n.current||(o=a.triggerRef.current)==null||o.focus(),i.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:i=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const l=i.target;((d=a.triggerRef.current)==null?void 0:d.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),_s=b.forwardRef((t,s)=>{const{__scopePopover:a,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,...x}=t,v=ae(fe,a),p=_e(a);return ca(),e.jsx(da,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:i,children:e.jsx(Rs,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:h,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>v.onOpenChange(!1),children:e.jsx(As,{"data-state":Ss(v.open),role:"dialog",id:v.contentId,...p,...x,ref:s,style:{...x.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Ps="PopoverClose",Tr=b.forwardRef((t,s)=>{const{__scopePopover:a,...n}=t,r=ae(Ps,a);return e.jsx(Qt.button,{type:"button",...n,ref:s,onClick:be(t.onClick,()=>r.onOpenChange(!1))})});Tr.displayName=Ps;var Or="PopoverArrow",Ir=b.forwardRef((t,s)=>{const{__scopePopover:a,...n}=t,r=_e(a);return e.jsx(Fs,{...r,...n,ref:s})});Ir.displayName=Or;function Ss(t){return t?"open":"closed"}var Rr=Ns,Ar=Ds,Fr=Ms,Ts=ks;const Gt=Rr,Ut=Ar,xt=b.forwardRef(({className:t,align:s="center",sideOffset:a=4,...n},r)=>e.jsx(Fr,{children:e.jsx(Ts,{ref:r,align:s,sideOffset:a,className:ce("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...n})}));xt.displayName=Ts.displayName;const Wr=I.object({title:I.string().min(5,"Title must be at least 5 characters"),specific:I.string().min(20,"Please be more specific (at least 20 characters)"),measurable:I.string().min(20,"Please describe how you'll measure progress (at least 20 characters)"),achievable:I.string().min(20,"Please explain why this is achievable (at least 20 characters)"),relevant:I.string().min(20,"Please explain why this matters to you (at least 20 characters)"),timebound:I.string().min(10,"Please specify a timeframe (at least 10 characters)"),deadline:I.date().optional()});function Er({onGoalCreated:t}){Xt();const{toast:s}=Jt(),{activeUserId:a}=es(),[n,r]=b.useState(0),[i,l]=b.useState(!1),[o,c]=b.useState([]),[d,h]=b.useState({title:"",description:"",dueDate:void 0}),[x,v]=b.useState(null),p=8,u=rt({resolver:ot(Wr),defaultValues:{title:"",specific:"",measurable:"",achievable:"",relevant:"",timebound:"",deadline:void 0}}),j=u.watch(),f=async C=>{switch(C){case 0:return!0;case 1:return await u.trigger("title");case 2:return await u.trigger("specific");case 3:return await u.trigger("measurable");case 4:return await u.trigger("achievable");case 5:return await u.trigger("relevant");case 6:return await u.trigger(["timebound","deadline"]);case 7:return!0;default:return!1}},N=async()=>{await f(n)&&n<p-1&&r(n+1)},D=()=>{n>0&&r(n-1)},W=()=>{d.title.trim()&&(c([...o,{...d}]),h({title:"",description:"",dueDate:void 0}))},ne=C=>{c(o.filter((k,q)=>q!==C))},X=async C=>{var k;if(a)try{const oe=await(await de("POST",`/api/users/${a}/goals`,{title:C.title,specific:C.specific,measurable:C.measurable,achievable:C.achievable,relevant:C.relevant,timebound:C.timebound,deadline:(k=C.deadline)==null?void 0:k.toISOString(),status:"pending"})).json();v(oe),o.length>0&&await Promise.all(o.map(re=>{var le;return de("POST",`/api/goals/${oe.id}/milestones`,{title:re.title,description:re.description||null,dueDate:((le=re.dueDate)==null?void 0:le.toISOString())||null,isCompleted:!1})})),Hs.invalidateQueries({queryKey:[`/api/users/${a}/goals`]}),l(!0)}catch{s({title:"Error",description:"Failed to create goal",variant:"destructive"})}},P=()=>{u.reset(),r(0),c([]),v(null),l(!1),t&&t()},J=n/(p-1)*100;return e.jsxs(e.Fragment,{children:[e.jsxs(T,{children:[e.jsxs(A,{children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{children:[e.jsx(F,{children:"SMART Goal Wizard"}),e.jsx(je,{children:n===0?"Introduction":`Step ${n} of ${p-1}`})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ts,{value:J,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{className:n>=1?"text-blue-600 font-medium":"",children:"Title"}),e.jsx("span",{className:n>=2?"text-blue-600 font-medium":"",children:"Specific"}),e.jsx("span",{className:n>=3?"text-blue-600 font-medium":"",children:"Measurable"}),e.jsx("span",{className:n>=4?"text-blue-600 font-medium":"",children:"Achievable"}),e.jsx("span",{className:n>=5?"text-blue-600 font-medium":"",children:"Relevant"}),e.jsx("span",{className:n>=6?"text-blue-600 font-medium":"",children:"Time-bound"}),e.jsx("span",{className:n>=7?"text-blue-600 font-medium":"",children:"Milestones"})]})]})]}),e.jsx(O,{children:e.jsx(it,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(X),className:"space-y-6",children:[n===0&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center py-6",children:[e.jsx(he,{className:"h-16 w-16 mx-auto mb-4 text-primary"}),e.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Welcome to SMART Goal Setting"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto mb-6",children:"SMART goals are Specific, Measurable, Achievable, Relevant, and Time-bound. This framework helps you create clear, actionable goals that you can actually achieve."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-8",children:[e.jsxs(T,{children:[e.jsx(A,{className:"pb-3",children:e.jsxs(F,{className:"text-sm flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4"}),"Specific"]})}),e.jsx(O,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Clear and well-defined"})})]}),e.jsxs(T,{children:[e.jsx(A,{className:"pb-3",children:e.jsxs(F,{className:"text-sm flex items-center gap-2",children:[e.jsx(ba,{className:"h-4 w-4"}),"Measurable"]})}),e.jsx(O,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track your progress"})})]}),e.jsxs(T,{children:[e.jsx(A,{className:"pb-3",children:e.jsxs(F,{className:"text-sm flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4"}),"Achievable"]})}),e.jsx(O,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Realistic and attainable"})})]}),e.jsxs(T,{children:[e.jsx(A,{className:"pb-3",children:e.jsxs(F,{className:"text-sm flex items-center gap-2",children:[e.jsx(ma,{className:"h-4 w-4"}),"Relevant"]})}),e.jsx(O,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Matters to you"})})]}),e.jsxs(T,{className:"md:col-span-2",children:[e.jsx(A,{className:"pb-3",children:e.jsxs(F,{className:"text-sm flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),"Time-bound"]})}),e.jsx(O,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Has a clear deadline"})})]})]})]})}),n===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsxs("h3",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Start with a Clear Vision"]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Give your goal a memorable title that captures what you want to achieve. This will help you stay focused and motivated."})]}),e.jsx(E,{control:u.control,name:"title",render:({field:C})=>e.jsxs(L,{children:[e.jsxs(Y,{className:"text-lg flex items-center gap-2",children:["Goal Title ",e.jsx("span",{className:"text-red-500 text-xl",children:"*"})]}),e.jsx($,{children:e.jsx(ue,{placeholder:"e.g., Run a 5K Marathon, Learn Spanish, Save $5000...",className:"text-base",...C,"data-testid":"input-goal-title"})}),e.jsx(V,{children:"A clear, motivating title for your goal (at least 5 characters)"}),e.jsx(B,{})]})})]}),n===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsxs("h3",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Be Specific"]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Define exactly what you want to accomplish. Answer: What will I do? How will I do it? Where? With whom?"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:'Example: "I will exercise 3 times per week at the gym" instead of "I want to be healthier"'})]}),e.jsx(E,{control:u.control,name:"specific",render:({field:C})=>e.jsxs(L,{children:[e.jsxs(Y,{className:"text-lg flex items-center gap-2",children:["What Specifically Will You Do? ",e.jsx("span",{className:"text-red-500 text-xl",children:"*"})]}),e.jsx($,{children:e.jsx(K,{value:j.specific,onChange:k=>u.setValue("specific",k.target.value),placeholder:"Describe your goal in detail. What exactly will you accomplish? Be as specific as possible...",className:"resize-none min-h-[120px] text-base","data-testid":"textarea-goal-specific"})}),e.jsx(V,{children:"Be detailed and clear about what you'll do (at least 20 characters)"}),e.jsx(B,{})]})})]}),n===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsxs("h3",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Make It Measurable"]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"How will you know when you've achieved your goal? Define concrete criteria to track your progress."}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:'Example: "Complete 12 workout sessions" or "Save $100 per week"'})]}),e.jsx(E,{control:u.control,name:"measurable",render:({field:C})=>e.jsxs(L,{children:[e.jsxs(Y,{className:"text-lg flex items-center gap-2",children:["How Will You Measure Progress? ",e.jsx("span",{className:"text-red-500 text-xl",children:"*"})]}),e.jsx($,{children:e.jsx(K,{value:j.measurable,onChange:k=>u.setValue("measurable",k.target.value),placeholder:"What metrics or milestones will show your progress? How will you know you've succeeded?",className:"resize-none min-h-[120px] text-base","data-testid":"textarea-goal-measurable"})}),e.jsx(V,{children:"Define clear metrics to track progress (at least 20 characters)"}),e.jsx(B,{})]})})]}),n===4&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsxs("h3",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Keep It Achievable"]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Is this goal realistic given your current resources, skills, and time? Challenge yourself, but stay practical."}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:'Example: "I have gym membership and can commit 3 hours/week" or "I currently save $50/week and can increase to $100"'})]}),e.jsx(E,{control:u.control,name:"achievable",render:({field:C})=>e.jsxs(L,{children:[e.jsxs(Y,{className:"text-lg flex items-center gap-2",children:["Why Is This Achievable? ",e.jsx("span",{className:"text-red-500 text-xl",children:"*"})]}),e.jsx($,{children:e.jsx(K,{value:j.achievable,onChange:k=>u.setValue("achievable",k.target.value),placeholder:"What resources, skills, or support do you have? What makes this goal realistic for you?",className:"resize-none min-h-[120px] text-base","data-testid":"textarea-goal-achievable"})}),e.jsx(V,{children:"Explain why this goal is realistic for you (at least 20 characters)"}),e.jsx(B,{})]})})]}),n===5&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsxs("h3",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Make It Relevant"]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Why does this goal matter to you? How does it align with your values and life priorities?"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:'Example: "Better health will give me energy to play with my kids" or "Financial security reduces my stress"'})]}),e.jsx(E,{control:u.control,name:"relevant",render:({field:C})=>e.jsxs(L,{children:[e.jsxs(Y,{className:"text-lg flex items-center gap-2",children:["Why Does This Matter to You? ",e.jsx("span",{className:"text-red-500 text-xl",children:"*"})]}),e.jsx($,{children:e.jsx(K,{value:j.relevant,onChange:k=>u.setValue("relevant",k.target.value),placeholder:"How will achieving this goal improve your life? Why is it important to you right now?",className:"resize-none min-h-[120px] text-base","data-testid":"textarea-goal-relevant"})}),e.jsx(V,{children:"Explain the personal meaning behind this goal (at least 20 characters)"}),e.jsx(B,{})]})})]}),n===6&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsxs("h3",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Set a Timeline"]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"When will you achieve this goal? A deadline creates urgency and helps you stay on track."}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:'Example: "Complete by end of Q3" or "Achieve within 3 months"'})]}),e.jsx(E,{control:u.control,name:"timebound",render:({field:C})=>e.jsxs(L,{children:[e.jsxs(Y,{className:"text-lg flex items-center gap-2",children:["What's Your Timeframe? ",e.jsx("span",{className:"text-red-500 text-xl",children:"*"})]}),e.jsx($,{children:e.jsx(K,{value:j.timebound,onChange:k=>u.setValue("timebound",k.target.value),placeholder:"By when will you achieve this? Describe your timeline...",className:"resize-none min-h-[100px] text-base","data-testid":"textarea-goal-timebound"})}),e.jsx(V,{children:"Specify when you'll complete this goal (at least 10 characters)"}),e.jsx(B,{})]})}),e.jsx(E,{control:u.control,name:"deadline",render:({field:C})=>e.jsxs(L,{children:[e.jsx(Y,{className:"text-lg",children:"Target Deadline (Optional)"}),e.jsxs(Gt,{children:[e.jsx(Ut,{asChild:!0,children:e.jsx($,{children:e.jsxs(S,{variant:"outline",className:"w-full justify-start text-left font-normal","data-testid":"button-select-deadline",children:[e.jsx(Ne,{className:"mr-2 h-4 w-4"}),C.value?R(C.value,"PPP"):e.jsx("span",{children:"Pick a date"})]})})}),e.jsx(xt,{className:"w-auto p-0",align:"start",children:e.jsx(ht,{mode:"single",selected:C.value,onSelect:C.onChange,disabled:k=>k<new Date,initialFocus:!0})})]}),e.jsx(V,{children:"Optional: Select a specific target date"}),e.jsx(B,{})]})})]}),n===7&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsxs("h3",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Break It Down (Optional)"]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Milestones are smaller checkpoints that help you track progress toward your main goal. They keep you motivated and on track."})]}),e.jsxs(T,{children:[e.jsx(A,{className:"pb-3",children:e.jsxs(F,{className:"text-sm flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Add Milestone"]})}),e.jsxs(O,{className:"space-y-3",children:[e.jsx(ue,{placeholder:"Milestone title",value:d.title,onChange:C=>h({...d,title:C.target.value}),"data-testid":"input-milestone-title"}),e.jsx(K,{placeholder:"Description (optional)",value:d.description,onChange:C=>h({...d,description:C.target.value}),className:"resize-none",rows:2}),e.jsxs(Gt,{children:[e.jsx(Ut,{asChild:!0,children:e.jsxs(S,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(Ne,{className:"mr-2 h-4 w-4"}),d.dueDate?R(d.dueDate,"PPP"):e.jsx("span",{children:"Due date (optional)"})]})}),e.jsx(xt,{className:"w-auto p-0",align:"start",children:e.jsx(ht,{mode:"single",selected:d.dueDate,onSelect:C=>h({...d,dueDate:C}),disabled:C=>C<new Date,initialFocus:!0})})]}),e.jsxs(S,{type:"button",onClick:W,disabled:!d.title.trim(),className:"w-full","data-testid":"button-add-milestone",children:[e.jsx(It,{className:"mr-2 h-4 w-4"}),"Add Milestone"]})]})]}),o.length>0&&e.jsxs(T,{children:[e.jsx(A,{className:"pb-3",children:e.jsxs(F,{className:"text-sm flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"Your Milestones (",o.length,")"]})}),e.jsx(O,{children:e.jsx("div",{className:"space-y-2",children:o.map((C,k)=>e.jsxs("div",{className:"flex items-start justify-between p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:C.title}),C.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:C.description}),C.dueDate&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Due: ",R(C.dueDate,"PPP")]})]}),e.jsx(S,{type:"button",variant:"ghost",size:"sm",onClick:()=>ne(k),children:e.jsx(Bs,{className:"h-4 w-4"})})]},k))})})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsxs(S,{type:"button",variant:"outline",onClick:D,disabled:n===0,children:[e.jsx(rs,{className:"mr-2 h-4 w-4"}),"Previous"]}),n===0?e.jsxs(S,{type:"button",onClick:N,children:["Get Started",e.jsx(lt,{className:"ml-2 h-4 w-4"})]}):n<p-1?e.jsxs(S,{type:"button",onClick:N,children:["Next",e.jsx(lt,{className:"ml-2 h-4 w-4"})]}):e.jsxs(S,{type:"submit","data-testid":"button-create-goal",children:[e.jsx(Rt,{className:"mr-2 h-4 w-4"}),"Create Goal"]})]})]})})})]}),e.jsx(Re,{open:i,onOpenChange:C=>{l(C),C||P()},children:e.jsxs(Ae,{children:[e.jsxs(Fe,{children:[e.jsxs(We,{className:"flex items-center gap-2 text-green-600",children:[e.jsx(Rt,{className:"h-5 w-5"}),"Goal Created Successfully!"]}),e.jsxs(Ee,{children:["Your SMART goal has been created",o.length>0?` with ${o.length} milestone${o.length!==1?"s":""}`:"","."]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs(T,{children:[e.jsx(A,{className:"pb-2",children:e.jsx(F,{className:"text-sm",children:"Goal Summary"})}),e.jsxs(O,{children:[e.jsx("h3",{className:"font-bold text-lg",children:u.getValues("title")}),e.jsxs("div",{className:"mt-3 space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Specific:"})," ",u.getValues("specific").substring(0,100),"..."]}),u.getValues("deadline")&&e.jsxs("p",{children:[e.jsx("strong",{children:"Deadline:"})," ",R(u.getValues("deadline"),"PPP")]})]})]})]})}),e.jsx(ct,{children:e.jsx(S,{onClick:P,children:"Create Another Goal"})})]})})]})}const nt={completed:"#22c55e",in_progress:"#eab308",pending:"#94a3b8"};function Lr({userId:t}){const[s,a]=b.useState("month"),{data:n=[],isLoading:r}=ye({queryKey:[`/api/users/${t}/goals`],enabled:!!t}),{data:i=[]}=ye({queryKey:[`/api/users/${t}/goals/milestones`],enabled:!!t&&n.length>0,queryFn:async()=>{const u=n.map(async f=>(await(await fetch(`/api/goals/${f.id}/milestones`)).json()).map(W=>({...W,goalId:f.id})));return(await Promise.all(u)).flat()}}),l=()=>{const u=n.length,j=n.filter(D=>D.status==="completed").length,f=n.filter(D=>D.status==="in_progress").length,N=n.filter(D=>D.status==="pending").length;return{total:u,completed:j,inProgress:f,pending:N,completionRate:u>0?j/u*100:0}},o=()=>{const u=l();return[{name:"Completed",value:u.completed,color:nt.completed},{name:"In Progress",value:u.inProgress,color:nt.in_progress},{name:"Pending",value:u.pending,color:nt.pending}].filter(j=>j.value>0)},c=()=>{const u=i.filter(f=>f.isCompleted),j=i.filter(f=>!f.isCompleted);return{totalCompleted:u.length,totalPending:j.length,total:i.length}},d=()=>{let u;if(s==="week")u=me(new Date,7);else if(s==="month")u=me(new Date,30);else{if(n.length===0)return[];u=new Date(Math.min(...n.map(f=>new Date(f.createdAt).getTime())))}return Et({start:u,end:new Date}).map(f=>{R(f,"yyyy-MM-dd");const N=n.filter(W=>new Date(W.createdAt)<=f).length,D=n.filter(W=>W.status==="completed"&&new Date(W.createdAt)<=f).length;return{date:R(f,"MMM d"),total:N,completed:D,completionRate:N>0?D/N*100:0}})},h=()=>Et({start:me(new Date,29),end:new Date}).map(j=>{const f=R(j,"yyyy-MM-dd"),N=i.filter(D=>D.isCompleted&&R(new Date(D.createdAt),"yyyy-MM-dd")===f);return{date:R(j,"MMM d"),count:N.length}}),x=()=>{const u=n.filter(N=>N.deadline),j=u.filter(N=>N.status!=="completed"?!1:new Date(N.updatedAt||N.createdAt)<=new Date(N.deadline)).length,f=u.filter(N=>N.status!=="completed"?!1:new Date(N.updatedAt||N.createdAt)>new Date(N.deadline)).length;return[{name:"On Time",value:j,color:"#22c55e"},{name:"Late",value:f,color:"#ef4444"}].filter(N=>N.value>0)};if(r)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})});if(n.length===0)return e.jsx(T,{children:e.jsx(O,{className:"py-12 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No goals yet. Start setting goals to see insights!"})})});const v=l(),p=c();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(T,{children:[e.jsx(A,{className:"pb-3",children:e.jsx(F,{className:"text-sm font-medium",children:"Completion Rate"})}),e.jsxs(O,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[v.completionRate.toFixed(1),"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[v.completed," of ",v.total," goals"]})]})]}),e.jsxs(T,{children:[e.jsx(A,{className:"pb-3",children:e.jsx(F,{className:"text-sm font-medium",children:"Active Goals"})}),e.jsxs(O,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:v.inProgress}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Currently in progress"})]})]}),e.jsxs(T,{children:[e.jsx(A,{className:"pb-3",children:e.jsx(F,{className:"text-sm font-medium",children:"Milestones Completed"})}),e.jsxs(O,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.totalCompleted}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total achieved"})]})]}),e.jsxs(T,{children:[e.jsx(A,{className:"pb-3",children:e.jsx(F,{className:"text-sm font-medium",children:"Pending Milestones"})}),e.jsxs(O,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:p.totalPending}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Still in progress"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(T,{children:[e.jsxs(A,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5 text-primary"}),e.jsx(F,{children:"Goal Status Distribution"})]}),e.jsx(je,{children:"Breakdown of your goal statuses"})]}),e.jsx(O,{children:o().length>0?e.jsx(Ue,{width:"100%",height:300,children:e.jsxs(Ft,{children:[e.jsx(Wt,{data:o(),cx:"50%",cy:"50%",labelLine:!1,label:({name:u,percent:j})=>`${u} ${(j*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:o().map((u,j)=>e.jsx(At,{fill:u.color},`cell-${j}`))}),e.jsx(Ke,{})]})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-muted-foreground",children:"No status data available"})})]}),e.jsxs(T,{children:[e.jsxs(A,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ta,{className:"h-5 w-5 text-primary"}),e.jsx(F,{children:"Timeline Performance"})]}),e.jsx(je,{children:"Goals completed on time vs late"})]}),e.jsx(O,{children:x().length>0?e.jsx(Ue,{width:"100%",height:300,children:e.jsxs(Ft,{children:[e.jsx(Wt,{data:x(),cx:"50%",cy:"50%",labelLine:!1,label:({name:u,percent:j})=>`${u} ${(j*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:x().map((u,j)=>e.jsx(At,{fill:u.color},`cell-${j}`))}),e.jsx(Ke,{})]})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-muted-foreground",children:"No deadline data available"})})]})]}),e.jsxs(T,{children:[e.jsxs(A,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-5 w-5 text-primary"}),e.jsx(F,{children:"Progress Trends"})]}),e.jsx(is,{value:s,onValueChange:u=>a(u),className:"w-auto",children:e.jsxs(os,{children:[e.jsx(xe,{value:"week",children:"Week"}),e.jsx(xe,{value:"month",children:"Month"}),e.jsx(xe,{value:"all",children:"All Time"})]})})]}),e.jsx(je,{children:"Your goal completion progress over time"})]}),e.jsx(O,{children:e.jsx(Ue,{width:"100%",height:300,children:e.jsxs(Xs,{data:d(),children:[e.jsx(xa,{strokeDasharray:"3 3"}),e.jsx(fa,{dataKey:"date"}),e.jsx(pa,{}),e.jsx(Ke,{}),e.jsx(va,{}),e.jsx(St,{type:"monotone",dataKey:"total",stroke:"#8884d8",strokeWidth:2,name:"Total Goals"}),e.jsx(St,{type:"monotone",dataKey:"completed",stroke:"#22c55e",strokeWidth:2,name:"Completed"})]})})})]}),e.jsxs(T,{children:[e.jsxs(A,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ua,{className:"h-5 w-5 text-primary"}),e.jsx(F,{children:"30-Day Milestone Activity"})]}),e.jsx(je,{children:"Milestones completed in the past month"})]}),e.jsxs(O,{children:[e.jsx("div",{className:"grid grid-cols-10 gap-1",children:h().map((u,j)=>{const f=u.count,N=f===0?"bg-gray-100 dark:bg-gray-800":f===1?"bg-blue-200 dark:bg-blue-900":f===2?"bg-blue-400 dark:bg-blue-700":"bg-blue-600 dark:bg-blue-500";return e.jsx("div",{className:`aspect-square rounded ${N} flex items-center justify-center text-xs font-medium relative group`,title:`${u.date}: ${f} milestones`,children:e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 absolute -top-12 left-1/2 transform -translate-x-1/2 bg-black text-white text-xs rounded px-2 py-1 whitespace-nowrap z-10",children:[u.date,": ",f," ",f===1?"milestone":"milestones"]})},j)})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-100 dark:bg-gray-800 rounded"}),e.jsx("span",{children:"None"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-200 dark:bg-blue-900 rounded"}),e.jsx("span",{children:"1"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-400 dark:bg-blue-700 rounded"}),e.jsx("span",{children:"2"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-600 dark:bg-blue-500 rounded"}),e.jsx("span",{children:"3+"})]})]})]})]})]})}const Yr=I.object({title:I.string().min(3,"Title must be at least 3 characters"),specific:I.string().min(10,"Please provide more specific details"),measurable:I.string().min(10,"Please provide measurable criteria"),achievable:I.string().min(10,"Please explain why this is achievable"),relevant:I.string().min(10,"Please explain why this is relevant"),timebound:I.string().min(10,"Please provide a timeframe"),deadline:I.string().optional()}),$r=I.object({title:I.string().min(3,"Title must be at least 3 characters"),description:I.string().optional(),dueDate:I.string().optional()});function Si(){const{user:t}=Xt(),{toast:s}=Jt(),{activeUserId:a,apiPath:n}=es(),r=zs(),[i,l]=b.useState(!1),[o,c]=b.useState(null),[d,h]=b.useState(!1),[x,v]=b.useState(null),{data:p=[],isLoading:u,error:j}=ye({queryKey:[`${n}/goals`],enabled:!!a}),{data:f=[]}=ye({queryKey:[`${n}/goals/milestones`],enabled:!!a&&p.length>0}),{data:N=[],isLoading:D}=ye({queryKey:o?[`/api/goals/${o.id}/milestones`]:[],enabled:!!o}),W=m=>{const _=f.filter(ie=>ie.goalId===m);if(_.length===0)return{completed:0,total:0,percentage:0};const g=_.filter(ie=>ie.isCompleted).length,y=_.length,pe=Math.round(g/y*100);return{completed:g,total:y,percentage:pe}},ne=m=>m===0?"bg-gray-300":m<30?"bg-red-500":m<70?"bg-yellow-500":"bg-green-500",X={totalGoals:p.length,completedGoals:p.filter(m=>m.status==="completed").length,inProgressGoals:p.filter(m=>m.status==="in_progress"||m.status==="approved").length,pendingGoals:p.filter(m=>m.status==="pending").length},P=rt({resolver:ot(Yr),defaultValues:{title:"",specific:"",measurable:x?"Based on my reflection: "+x:"",achievable:"",relevant:"",timebound:"",deadline:R(new Date(Date.now()+30*24*60*60*1e3),"yyyy-MM-dd")}});b.useEffect(()=>{const m=sessionStorage.getItem("reflection_insights");m&&(v(m),l(!0),sessionStorage.removeItem("reflection_insights"))},[]),b.useEffect(()=>{x&&P.setValue("measurable",`Based on my reflection: ${x}`)},[x,P]);const J=rt({resolver:ot($r),defaultValues:{title:"",description:"",dueDate:""}}),C=Se({mutationFn:async m=>{if(!t)throw new Error("User not authenticated");if(!a)throw new Error("No active user");return await(await de("POST",`${n}/goals`,{...m,userId:a})).json()},onSuccess:()=>{r.invalidateQueries({queryKey:[`${n}/goals`]}),P.reset(),l(!1),s({title:"Goal Created",description:"Your goal has been created successfully."})},onError:m=>{s({title:"Error",description:`Failed to create goal: ${m.message}`,variant:"destructive"})}}),k=Se({mutationFn:async m=>{if(!o)throw new Error("No goal selected");return await(await de("POST",`/api/goals/${o.id}/milestones`,{...m,goalId:o.id})).json()},onSuccess:()=>{r.invalidateQueries({queryKey:[`/api/goals/${o==null?void 0:o.id}/milestones`]}),r.invalidateQueries({queryKey:[`${n}/goals`]}),r.invalidateQueries({queryKey:[`${n}/goals/milestones`]}),J.reset(),h(!1),s({title:"Milestone Added",description:"Milestone has been added to your goal."})},onError:m=>{s({title:"Error",description:`Failed to add milestone: ${m.message}`,variant:"destructive"})}}),q=Se({mutationFn:async({goalId:m,status:_,comments:g})=>await(await de("PATCH",`/api/goals/${m}/status`,{status:_,therapistComments:g})).json(),onSuccess:()=>{r.invalidateQueries({queryKey:[`${n}/goals`]}),s({title:"Goal Updated",description:"Goal status has been updated successfully."})},onError:m=>{s({title:"Error",description:`Failed to update goal: ${m.message}`,variant:"destructive"})}}),oe=Se({mutationFn:async({milestoneId:m,isCompleted:_})=>await(await de("PATCH",`/api/milestones/${m}/completion`,{isCompleted:_})).json(),onSuccess:()=>{o&&r.invalidateQueries({queryKey:[`/api/goals/${o.id}/milestones`]}),r.invalidateQueries({queryKey:[`${n}/goals`]}),r.invalidateQueries({queryKey:[`${n}/goals/milestones`]}),s({title:"Milestone Updated",description:"Milestone completion status has been updated."})}}),re=m=>{C.mutate(m)},le=m=>{k.mutate(m)},Pe=(m,_="sm")=>{const g=_==="lg"?"px-3 py-1.5 text-sm":"px-2 py-0.5 text-xs";switch(m){case"pending":return e.jsxs(ve,{variant:"outline",className:`bg-yellow-100 text-yellow-800 hover:bg-yellow-100 ${g}`,children:[e.jsx(dt,{className:"h-3 w-3 mr-1"}),"Pending"]});case"in_progress":return e.jsxs(ve,{variant:"outline",className:`bg-blue-100 text-blue-800 hover:bg-blue-100 ${g}`,children:[e.jsx($e,{className:"h-3 w-3 mr-1"}),"In Progress"]});case"approved":return e.jsxs(ve,{variant:"outline",className:`bg-purple-100 text-purple-800 hover:bg-purple-100 ${g}`,children:[e.jsx(Oe,{className:"h-3 w-3 mr-1"}),"Approved"]});case"completed":return e.jsxs(ve,{variant:"outline",className:`bg-green-100 text-green-800 hover:bg-green-100 ${g}`,children:[e.jsx(Oe,{className:"h-3 w-3 mr-1"}),"Completed"]});default:return e.jsx(ve,{variant:"outline",className:g,children:m})}};return e.jsx(Us,{children:e.jsxs("div",{className:"container py-6",children:[e.jsx(Ks,{}),e.jsx(Vs,{title:"Smart Goals",description:"Set structured SMART goals to track your progress and celebrate achievements",badges:[]}),!u&&p.length>0&&e.jsxs(T,{className:"mb-6 bg-gradient-to-br from-primary/5 to-primary/10 border-primary/20",children:[e.jsx(A,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5 text-primary"}),e.jsx(F,{className:"text-lg",children:"Overall Progress"})]})}),e.jsx(O,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-white/50 dark:bg-slate-800/50 rounded-lg","data-testid":"stat-total-goals",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:X.totalGoals}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Goals"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/50 dark:bg-slate-800/50 rounded-lg","data-testid":"stat-completed-goals",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:X.completedGoals}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Completed"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/50 dark:bg-slate-800/50 rounded-lg","data-testid":"stat-in-progress-goals",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:X.inProgressGoals}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"In Progress"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/50 dark:bg-slate-800/50 rounded-lg","data-testid":"stat-pending-goals",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:X.pendingGoals}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pending"})]})]})})]}),(t==null?void 0:t.role)==="client"&&e.jsxs(Re,{open:i,onOpenChange:l,children:[e.jsx(ia,{asChild:!0,children:e.jsxs(S,{size:"sm",className:"gap-1 hidden","data-testid":"button-new-goal",children:[e.jsx(Te,{className:"h-4 w-4"}),"New Goal"]})}),e.jsxs(Ae,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Fe,{children:[e.jsx(We,{children:"Create a SMART Goal"}),e.jsx(Ee,{children:"SMART goals are Specific, Measurable, Achievable, Relevant, and Time-bound."})]}),e.jsx("div",{className:"mb-6",children:e.jsxs(Lt,{type:"single",collapsible:!0,className:"bg-muted/50 rounded-lg p-2",children:[e.jsxs(Ve,{value:"smart-goals",children:[e.jsx(qe,{className:"text-base font-medium",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ee,{className:"h-5 w-5 mr-2 text-primary"}),"Understanding SMART Goals"]})}),e.jsxs(Qe,{className:"text-sm",children:[e.jsx("p",{className:"mb-2",children:"SMART is an acronym used to guide goal setting. It stands for Specific, Measurable, Achievable, Relevant, and Time-bound."}),e.jsxs("div",{className:"space-y-3 mt-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Specific"}),e.jsx("p",{children:"Your goal should clearly define what you want to accomplish. The more specific, the better."}),e.jsx("p",{className:"text-xs mt-1 italic",children:'Example: "I will walk 10,000 steps daily" instead of "I will exercise more."'})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Measurable"}),e.jsx("p",{children:"You need concrete criteria to track your progress and measure success."}),e.jsx("p",{className:"text-xs mt-1 italic",children:'Example: "I will save $300 per month" instead of "I will save money."'})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Achievable"}),e.jsx("p",{children:"Your goal should be realistic and attainable with the resources available to you."}),e.jsx("p",{className:"text-xs mt-1 italic",children:'Example: "I will read one book per month" instead of "I will read 100 books this year."'})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Relevant"}),e.jsx("p",{children:"Your goal should align with your broader life objectives and personal values."}),e.jsx("p",{className:"text-xs mt-1 italic",children:'Example: "I will take a coding course to advance my career" instead of pursuing a goal unrelated to your interests or needs.'})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Time-bound"}),e.jsx("p",{children:"Your goal needs a target date or deadline to create urgency and maintain focus."}),e.jsx("p",{className:"text-xs mt-1 italic",children:'Example: "I will complete this project by June 30th" instead of "I will do this project someday."'})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium",children:"Benefits of SMART Goals:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 mt-1",children:[e.jsx("li",{children:"Provides clear direction and focus"}),e.jsx("li",{children:"Makes it easier to track progress"}),e.jsx("li",{children:"Increases motivation and commitment"}),e.jsx("li",{children:"Helps prioritize your efforts and resources"}),e.jsx("li",{children:"Creates accountability"})]})]})]})]}),e.jsxs(Ve,{value:"milestones",children:[e.jsx(qe,{className:"text-base font-medium",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ee,{className:"h-5 w-5 mr-2 text-primary"}),"The Power of Milestones"]})}),e.jsxs(Qe,{className:"text-sm",children:[e.jsx("p",{className:"mb-2",children:"Milestones are smaller, manageable targets that mark your progress toward a larger goal."}),e.jsxs("div",{className:"space-y-3 mt-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Why Use Milestones?"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 mt-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Break down complexity"})," - Large goals become less overwhelming"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Track progress"})," - Regular feedback on how you're doing"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Celebrate small wins"})," - Boost motivation along the journey"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Adjust as needed"})," - Early warning if something needs to change"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Creating Effective Milestones:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 mt-1",children:[e.jsx("li",{children:"Make them specific and concrete"}),e.jsx("li",{children:"Set realistic timeframes"}),e.jsx("li",{children:"Ensure they build logically toward your main goal"}),e.jsx("li",{children:"Keep them achievable but challenging"})]})]})]})]})]})]})}),e.jsx(it,{...P,children:e.jsxs("form",{onSubmit:P.handleSubmit(re),className:"space-y-4",children:[e.jsx(E,{control:P.control,name:"title",render:({field:m})=>e.jsxs(L,{children:[e.jsx(Y,{children:"Goal Title"}),e.jsx($,{children:e.jsx(ue,{placeholder:"Enter a title for your goal",...m})}),e.jsx(B,{})]})}),e.jsx(E,{control:P.control,name:"specific",render:({field:m})=>e.jsxs(L,{children:[e.jsx(Y,{children:"Specific"}),e.jsx(V,{children:"What exactly do you want to accomplish?"}),e.jsx($,{children:e.jsx(K,{placeholder:"Be precise about what you want to achieve...",rows:3,...m})}),e.jsx(B,{})]})}),e.jsx(E,{control:P.control,name:"measurable",render:({field:m})=>e.jsxs(L,{children:[e.jsx(Y,{children:"Measurable"}),e.jsx(V,{children:"How will you track progress and measure success?"}),e.jsx($,{children:e.jsx(K,{placeholder:"Define criteria to measure progress...",rows:3,...m})}),e.jsx(B,{})]})}),e.jsx(E,{control:P.control,name:"achievable",render:({field:m})=>e.jsxs(L,{children:[e.jsx(Y,{children:"Achievable"}),e.jsx(V,{children:"Is this goal realistic? Do you have the resources and capabilities?"}),e.jsx($,{children:e.jsx(K,{placeholder:"Explain why this goal is attainable...",rows:3,...m})}),e.jsx(B,{})]})}),e.jsx(E,{control:P.control,name:"relevant",render:({field:m})=>e.jsxs(L,{children:[e.jsx(Y,{children:"Relevant"}),e.jsx(V,{children:"Why is this goal important to you? How does it align with your values?"}),e.jsx($,{children:e.jsx(K,{placeholder:"Describe why this goal matters to you...",rows:3,...m})}),e.jsx(B,{})]})}),e.jsx(E,{control:P.control,name:"timebound",render:({field:m})=>e.jsxs(L,{children:[e.jsx(Y,{children:"Time-bound"}),e.jsx(V,{children:"What's your time frame for accomplishing this goal?"}),e.jsx($,{children:e.jsx(K,{placeholder:"Describe your timeline and deadlines...",rows:3,...m})}),e.jsx(B,{})]})}),e.jsx(E,{control:P.control,name:"deadline",render:({field:m})=>e.jsxs(L,{children:[e.jsx(Y,{children:"Target Completion Date"}),e.jsx($,{children:e.jsx(ue,{type:"date",...m})}),e.jsx(B,{})]})}),e.jsx(ct,{children:e.jsx(S,{type:"submit",disabled:C.isPending,children:C.isPending?"Creating...":"Create Goal"})})]})})]})]}),e.jsxs(is,{defaultValue:(t==null?void 0:t.role)==="therapist"||(t==null?void 0:t.role)==="admin"?"goals":"set",className:"w-full",children:[e.jsxs(os,{children:[(t==null?void 0:t.role)==="client"&&e.jsx(xe,{value:"set",children:"Set Goal"}),e.jsx(xe,{value:"goals",children:(t==null?void 0:t.role)==="therapist"||(t==null?void 0:t.role)==="admin"?"Client's Goals":"My Goals"}),e.jsxs(xe,{value:"insights",children:[e.jsx($e,{className:"h-4 w-4 mr-1.5"}),"Insights"]})]}),(t==null?void 0:t.role)==="client"&&e.jsxs(Ge,{value:"set",children:[e.jsx(Lt,{type:"single",collapsible:!0,className:"mb-6 bg-blue-50 dark:bg-blue-950/30 rounded-lg px-4",children:e.jsxs(Ve,{value:"why-smart-goals",className:"border-0",children:[e.jsx(qe,{className:"text-base font-medium hover:no-underline py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ee,{className:"h-5 w-5 mr-2 text-blue-600 dark:text-blue-400"}),"Why SMART Goals?"]})}),e.jsxs(Qe,{className:"text-sm text-muted-foreground pb-4",children:[e.jsx("p",{className:"mb-3",children:"SMART goals provide structure and direction to your personal growth journey. Research shows that well-defined goals are significantly more likely to be achieved than vague intentions."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900/50 p-3 rounded-md",children:[e.jsx("h4",{className:"font-medium text-foreground mb-1",children:"For Mental Health"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-xs",children:[e.jsx("li",{children:"Provides a sense of purpose and direction"}),e.jsx("li",{children:"Creates structure and routine"}),e.jsx("li",{children:"Builds confidence through achievement"}),e.jsx("li",{children:"Reduces anxiety by breaking down challenges"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900/50 p-3 rounded-md",children:[e.jsx("h4",{className:"font-medium text-foreground mb-1",children:"For Personal Growth"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-xs",children:[e.jsx("li",{children:"Helps identify important values and priorities"}),e.jsx("li",{children:"Develops self-discipline and focus"}),e.jsx("li",{children:"Creates a roadmap for steady improvement"}),e.jsx("li",{children:"Provides objective measures of progress"})]})]})]})]})]})}),e.jsx(Er,{onGoalCreated:()=>{r.invalidateQueries({queryKey:[`/api/users/${a}/goals`]})}})]}),e.jsxs(Ge,{value:"goals",className:"space-y-4",children:[u?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):j?e.jsxs("div",{className:"bg-destructive/10 p-4 rounded-md text-center",children:[e.jsx("p",{className:"text-destructive font-medium",children:"Error loading goals"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Please try again later"})]}):p.length===0?e.jsxs("div",{className:"text-center p-8 border border-dashed rounded-lg",children:[e.jsx("h3",{className:"font-medium text-lg",children:"No Goals Yet"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:(t==null?void 0:t.role)==="client"?"Create your first goal to start tracking your progress.":"Your client hasn't created any goals yet."}),(t==null?void 0:t.role)==="client"&&e.jsxs(S,{variant:"outline",className:"mt-4",onClick:()=>l(!0),children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Create Your First Goal"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(m=>{const _=W(m.id);return ne(_.percentage),e.jsxs(T,{className:"overflow-hidden","data-testid":`goal-card-${m.id}`,children:[e.jsxs(A,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx(F,{className:"text-lg font-bold",children:m.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{children:Pe(m.status,"lg")}),e.jsxs(sa,{children:[e.jsx(aa,{asChild:!0,children:e.jsx(S,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(ga,{className:"h-4 w-4"})})}),e.jsxs(na,{align:"end",children:[e.jsxs(Ot,{onClick:()=>c(m),children:[e.jsx(ra,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsxs(Ot,{onClick:()=>c(m),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"View Milestones (",_.total,")"]})]})]})]})]}),_.total>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Milestone Progress"}),e.jsxs("span",{className:"font-semibold","data-testid":`goal-progress-${m.id}`,children:[_.completed,"/",_.total," completed (",_.percentage,"%)"]})]}),e.jsx(ts,{value:_.percentage,className:"h-2","data-testid":`progress-bar-${m.id}`})]}),m.deadline&&e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mt-2",children:[e.jsx(Ne,{className:"h-4 w-4 mr-1"}),"Target: ",R(Ze(m.deadline),"MMM d, yyyy")]})]}),e.jsx(O,{className:"pb-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-primary",children:"Specific"}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:m.specific})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-primary",children:"Measurable"}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:m.measurable})]})]})}),(t==null?void 0:t.role)==="therapist"&&e.jsxs(Gs,{className:"flex flex-col items-stretch pt-1 pb-3",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Update Status:"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(S,{variant:m.status==="pending"?"default":"outline",size:"sm",onClick:()=>q.mutate({goalId:m.id,status:"pending",comments:m.therapistComments}),children:"Pending"}),e.jsx(S,{variant:m.status==="in_progress"?"default":"outline",size:"sm",onClick:()=>q.mutate({goalId:m.id,status:"in_progress",comments:m.therapistComments}),children:"In Progress"}),e.jsx(S,{variant:m.status==="approved"?"default":"outline",size:"sm",onClick:()=>q.mutate({goalId:m.id,status:"approved",comments:m.therapistComments}),children:"Approved"}),e.jsx(S,{variant:m.status==="completed"?"default":"outline",size:"sm",onClick:()=>q.mutate({goalId:m.id,status:"completed",comments:m.therapistComments}),children:"Completed"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Feedback:"}),e.jsx(K,{placeholder:"Add your feedback or suggestions here...",defaultValue:m.therapistComments||"",className:"min-h-[80px]",onBlur:g=>{g.target.value!==m.therapistComments&&q.mutate({goalId:m.id,status:m.status,comments:g.target.value})}})]})]})]},m.id)})}),e.jsx(Re,{open:!!o,onOpenChange:m=>!m&&c(null),children:e.jsxs(Ae,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Fe,{children:[e.jsx(We,{className:"text-2xl",children:o==null?void 0:o.title}),e.jsxs(Ee,{className:"flex items-center gap-3 flex-wrap",children:[Pe((o==null?void 0:o.status)||"pending","lg"),(o==null?void 0:o.deadline)&&e.jsxs("span",{className:"inline-flex items-center text-sm text-muted-foreground",children:[e.jsx(Ne,{className:"h-4 w-4 mr-1"}),"Target: ",R(Ze(o==null?void 0:o.deadline),"MMM d, yyyy")]}),(()=>{const m=W((o==null?void 0:o.id)||0);return m.total>0?e.jsxs("span",{className:"inline-flex items-center text-sm font-medium text-primary",children:[e.jsx(Oe,{className:"h-4 w-4 mr-1"}),m.completed,"/",m.total," milestones completed"]}):null})()]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-lg mb-3",children:"Goal Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Specific"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:o==null?void 0:o.specific})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Measurable"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:o==null?void 0:o.measurable})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Achievable"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:o==null?void 0:o.achievable})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Relevant"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:o==null?void 0:o.relevant})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Time-bound"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:o==null?void 0:o.timebound})]})]}),(o==null?void 0:o.therapistComments)&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Therapist Feedback"}),e.jsx("p",{className:"text-sm italic bg-muted/50 p-3 rounded-md mt-1",children:o.therapistComments})]})]}),e.jsxs("div",{id:"milestones-section",className:"bg-muted/30 p-6 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold text-xl",children:"Milestones"})]}),(t==null?void 0:t.role)==="client"&&e.jsxs(S,{variant:"default",size:"sm",className:"gap-1",onClick:()=>h(!0),"data-testid":"button-add-milestone",children:[e.jsx(Te,{className:"h-4 w-4"}),"Add Milestone"]})]}),D?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):N.length===0?e.jsxs("div",{className:"text-center p-6 border border-dashed rounded-lg",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"No milestones created yet"}),(t==null?void 0:t.role)==="client"&&e.jsxs(S,{variant:"outline",size:"sm",className:"mt-3",onClick:()=>h(!0),children:[e.jsx(Te,{className:"h-4 w-4 mr-1"}),"Add First Milestone"]})]}):e.jsx("div",{className:"space-y-3",children:N.map((m,_)=>e.jsx("div",{className:`p-3 border rounded-md ${m.isCompleted?"bg-green-50 border-green-200":"bg-background"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary font-semibold text-sm",children:_+1}),e.jsx("div",{className:"mt-0.5",children:(t==null?void 0:t.role)==="client"?e.jsx(ja,{checked:m.isCompleted,onCheckedChange:g=>{oe.mutate({milestoneId:m.id,isCompleted:!!g})}}):m.isCompleted?e.jsx(Oe,{className:"h-5 w-5 text-green-600"}):e.jsx(dt,{className:"h-5 w-5 text-yellow-600"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`font-medium ${m.isCompleted?"text-green-800":""}`,children:m.title}),m.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:m.description}),m.dueDate&&e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mt-2",children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),R(Ze(m.dueDate),"MMM d, yyyy")]})]})]})},m.id))})]})]})]})}),e.jsx(Re,{open:d,onOpenChange:h,children:e.jsxs(Ae,{children:[e.jsxs(Fe,{children:[e.jsx(We,{children:"Add Milestone"}),e.jsx(Ee,{children:"Break down your goal into smaller, achievable steps."})]}),e.jsx(it,{...J,children:e.jsxs("form",{onSubmit:J.handleSubmit(le),className:"space-y-4",children:[e.jsx(E,{control:J.control,name:"title",render:({field:m})=>e.jsxs(L,{children:[e.jsx(Y,{children:"Milestone Title"}),e.jsx($,{children:e.jsx(ue,{placeholder:"Enter a title for this milestone",...m})}),e.jsx(B,{})]})}),e.jsx(E,{control:J.control,name:"description",render:({field:m})=>e.jsxs(L,{children:[e.jsx(Y,{children:"Description (Optional)"}),e.jsx($,{children:e.jsx(K,{placeholder:"Add details about this milestone...",rows:3,...m})}),e.jsx(B,{})]})}),e.jsx(E,{control:J.control,name:"dueDate",render:({field:m})=>e.jsxs(L,{children:[e.jsx(Y,{children:"Due Date (Optional)"}),e.jsx($,{children:e.jsx(ue,{type:"date",...m})}),e.jsx(B,{})]})}),e.jsx(ct,{children:e.jsx(S,{type:"submit",disabled:k.isPending,children:k.isPending?"Adding...":"Add Milestone"})})]})})]})})]}),e.jsx(Ge,{value:"insights",children:a&&e.jsx(Lr,{userId:a})})]})]})})}export{Si as default};
