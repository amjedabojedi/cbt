import{$ as k,m as T,u as A,k as E,r as S,j as e,C as c,a as d,B as x,e as h,f as u}from"./index-BJDVYPr2.js";import{u as p}from"./useQuery-CVl6tFXz.js";import{B,f as D}from"./Header-HmO9KIvP.js";import{T as P,a as R,b as g,c as N}from"./tabs-DZkkmdmK.js";import{A as v}from"./AppLayout-B4pR-pjA.js";import{A as $}from"./arrow-left-CJqe-HNu.js";import{U as q}from"./user-hKahD6_k.js";import{H as I,B as K,T as J,C as V}from"./target-7abParum.js";import"./utils-km2FGkQ4.js";import"./index-ZMpGrT0S.js";import"./index-epKMAjhH.js";import"./check-CPyQFfyd.js";function se(){const{clientId:a}=k(),[,r]=T(),{user:t}=A(),{setViewingClient:f}=E(),[b,y]=S.useState("overview"),{data:s,isLoading:C}=p({queryKey:[`/api/users/${a}`],enabled:!!a&&!!t&&t.role==="therapist"}),{data:l=[],isLoading:w}=p({queryKey:[`/api/users/${a}/emotions`],enabled:!!a&&!!t&&t.role==="therapist"}),{data:n=[],isLoading:L}=p({queryKey:[`/api/users/${a}/journal`],enabled:!!a&&!!t&&t.role==="therapist"}),{data:o=[],isLoading:G}=p({queryKey:[`/api/users/${a}/thoughts`],enabled:!!a&&!!t&&t.role==="therapist"}),{data:m=[],isLoading:H}=p({queryKey:[`/api/users/${a}/goals`],enabled:!!a&&!!t&&t.role==="therapist"}),j=i=>{if(s)switch(f(s.id,s.name||s.username),localStorage.setItem("viewingClientId",s.id.toString()),localStorage.setItem("viewingClientName",s.name||s.username),i){case"emotions":r("/emotions");break;case"thoughts":r("/thoughts");break;case"journal":r("/journal");break;case"goals":r("/goals");break;case"dashboard":r("/dashboard");break}};return C?e.jsx(v,{title:"Client Profile",children:e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsx("div",{className:"text-center",children:"Loading client profile..."})})}):s?e.jsx(v,{title:`${s.name||s.username} - Profile`,children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>r("/clients"),className:"flex items-center",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Back to Clients"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-neutral-800",children:s.name||s.username}),e.jsx("p",{className:"text-neutral-500",children:s.email})]})]}),e.jsx(B,{variant:s.status==="active"?"default":"secondary",children:s.status||"Active"})]}),e.jsxs(c,{className:"mb-6",children:[e.jsx(h,{children:e.jsxs(u,{className:"flex items-center",children:[e.jsx(q,{className:"h-5 w-5 mr-2"}),"Client Information"]})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-neutral-500",children:"Full Name"}),e.jsx("p",{className:"text-neutral-800",children:s.name||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-neutral-500",children:"Email"}),e.jsx("p",{className:"text-neutral-800",children:s.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-neutral-500",children:"Member Since"}),e.jsx("p",{className:"text-neutral-800",children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"Unknown"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs(x,{variant:"outline",className:"flex flex-col items-center p-4 h-auto",onClick:()=>j("emotions"),children:[e.jsx(I,{className:"h-6 w-6 mb-2 text-red-500"}),e.jsx("span",{className:"text-sm",children:"Emotions"}),e.jsxs("span",{className:"text-xs text-neutral-500",children:[(l==null?void 0:l.length)||0," records"]})]}),e.jsxs(x,{variant:"outline",className:"flex flex-col items-center p-4 h-auto",onClick:()=>j("thoughts"),children:[e.jsx(K,{className:"h-6 w-6 mb-2 text-purple-500"}),e.jsx("span",{className:"text-sm",children:"Thoughts"}),e.jsxs("span",{className:"text-xs text-neutral-500",children:[(o==null?void 0:o.length)||0," records"]})]}),e.jsxs(x,{variant:"outline",className:"flex flex-col items-center p-4 h-auto",onClick:()=>j("journal"),children:[e.jsx(D,{className:"h-6 w-6 mb-2 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Journal"}),e.jsxs("span",{className:"text-xs text-neutral-500",children:[(n==null?void 0:n.length)||0," entries"]})]}),e.jsxs(x,{variant:"outline",className:"flex flex-col items-center p-4 h-auto",onClick:()=>j("goals"),children:[e.jsx(J,{className:"h-6 w-6 mb-2 text-blue-500"}),e.jsx("span",{className:"text-sm",children:"Goals"}),e.jsxs("span",{className:"text-xs text-neutral-500",children:[(m==null?void 0:m.length)||0," goals"]})]}),e.jsxs(x,{variant:"default",className:"flex flex-col items-center p-4 h-auto",onClick:()=>j("dashboard"),children:[e.jsx(V,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Dashboard"}),e.jsx("span",{className:"text-xs",children:"View all data"})]})]}),e.jsxs(P,{value:b,onValueChange:y,children:[e.jsxs(R,{className:"grid w-full grid-cols-4",children:[e.jsx(g,{value:"overview",children:"Overview"}),e.jsx(g,{value:"recent",children:"Recent Activity"}),e.jsx(g,{value:"progress",children:"Progress"}),e.jsx(g,{value:"notes",children:"Notes"})]}),e.jsx(N,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(c,{children:[e.jsx(h,{children:e.jsx(u,{className:"text-lg",children:"Recent Emotions"})}),e.jsx(d,{children:w?e.jsx("p",{className:"text-neutral-500",children:"Loading..."}):l&&l.length>0?e.jsx("div",{className:"space-y-2",children:l.slice(0,3).map(i=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-neutral-50 rounded",children:[e.jsx("span",{className:"font-medium",children:i.coreEmotion}),e.jsx("span",{className:"text-sm text-neutral-500",children:new Date(i.createdAt).toLocaleDateString()})]},i.id))}):e.jsx("p",{className:"text-neutral-500",children:"No emotion records yet"})})]}),e.jsxs(c,{children:[e.jsx(h,{children:e.jsx(u,{className:"text-lg",children:"Recent Journal Entries"})}),e.jsx(d,{children:L?e.jsx("p",{className:"text-neutral-500",children:"Loading..."}):n&&n.length>0?e.jsx("div",{className:"space-y-2",children:n.slice(0,3).map(i=>e.jsxs("div",{className:"p-2 bg-neutral-50 rounded",children:[e.jsx("p",{className:"font-medium text-sm",children:i.title}),e.jsx("p",{className:"text-xs text-neutral-500",children:new Date(i.createdAt).toLocaleDateString()})]},i.id))}):e.jsx("p",{className:"text-neutral-500",children:"No journal entries yet"})})]})]})}),e.jsx(N,{value:"recent",className:"space-y-4",children:e.jsxs(c,{children:[e.jsx(h,{children:e.jsx(u,{children:"Recent Activity Timeline"})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-neutral-500",children:"Activity timeline feature coming soon"})})})]})}),e.jsx(N,{value:"progress",className:"space-y-4",children:e.jsxs(c,{children:[e.jsx(h,{children:e.jsx(u,{children:"Progress Tracking"})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(l==null?void 0:l.length)||0}),e.jsx("div",{className:"text-sm text-blue-600",children:"Emotion Records"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(n==null?void 0:n.length)||0}),e.jsx("div",{className:"text-sm text-green-600",children:"Journal Entries"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(o==null?void 0:o.length)||0}),e.jsx("div",{className:"text-sm text-purple-600",children:"Thought Records"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:(m==null?void 0:m.length)||0}),e.jsx("div",{className:"text-sm text-orange-600",children:"Goals Set"})]})]})})]})}),e.jsx(N,{value:"notes",className:"space-y-4",children:e.jsxs(c,{children:[e.jsx(h,{children:e.jsx(u,{children:"Therapist Notes"})}),e.jsx(d,{children:e.jsx("p",{className:"text-neutral-500",children:"Therapist notes feature coming soon"})})]})})]})]})}):e.jsx(v,{title:"Client Profile",children:e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsx(c,{children:e.jsxs(d,{className:"pt-6 text-center",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Client Not Found"}),e.jsx("p",{className:"text-neutral-500 mb-4",children:"The client profile you're looking for doesn't exist or you don't have permission to view it."}),e.jsx(x,{onClick:()=>r("/clients"),children:"Back to Clients"})]})})})})}export{se as default};
