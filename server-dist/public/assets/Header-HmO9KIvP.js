import{c as R,u as we,m as at,r as i,j as t,b as M,L as De,an as st,a0 as en,F as ye,G as it,H as tn,K as O,I as P,J as b,M as lt,N as rn,P as _,Z as U,O as nn,ao as ct,ap as on,S as an,V as dt,Y as ut,Q as ft,U as oe,n as pt,k as mt,B as K,h as ee,_ as sn,aq as ln,ar as cn,X as dn}from"./index-BJDVYPr2.js";import{B as Pe,H as ue,M as un,T as fn,C as pn}from"./target-7abParum.js";import{h as ht,u as xt,F as gt,R as vt,a as bt,c as mn}from"./index-ZMpGrT0S.js";import{c as wt,R as hn,I as xn}from"./index-epKMAjhH.js";import{C as gn}from"./check-CPyQFfyd.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=R("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=R("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=R("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=R("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=R("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=R("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=R("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=R("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=R("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=R("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=R("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=R("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=R("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=R("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=R("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=R("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=R("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function Ia(){var c;const{user:e,logout:r}=we(),[n]=at(),[a,o]=i.useState(!1);let s=[];return(e==null?void 0:e.role)==="admin"?s=[{href:"/admin",label:"Admin Dashboard",icon:t.jsx(_e,{size:20}),exact:!0},{href:"/admin/users",label:"User Management",icon:t.jsx(pe,{size:20})},{href:"/admin/engagement-settings",label:"Engagement Settings",icon:t.jsx(ue,{size:20})},{href:"/admin/logs",label:"System Logs",icon:t.jsx(rt,{size:20})},{href:"/admin/notifications",label:"Notifications",icon:t.jsx(un,{size:20})},{href:"/subscriptions",label:"Subscription Plans",icon:t.jsx(vn,{size:20})},{href:"/emotion-mapping",label:"Emotion Mapping",icon:t.jsx(ue,{size:20})},{href:"/library",label:"Resource Library",icon:t.jsx(fe,{size:20})}]:(e==null?void 0:e.role)==="therapist"?s=[{href:"/dashboard",label:"Therapist Dashboard",icon:t.jsx(_e,{size:20})},{href:"/clients",label:"My Clients",icon:t.jsx(pe,{size:20})},{href:"/library",label:"Resource Library",icon:t.jsx(fe,{size:20})}]:(s=[{href:"/dashboard",label:"Dashboard",icon:t.jsx(_e,{size:20})},{href:"/emotions",label:"Emotion Tracking",icon:t.jsx(ue,{size:20})},{href:"/thoughts",label:"Thought Records",icon:t.jsx(Pe,{size:20})},{href:"/journal",label:"Journal",icon:t.jsx(rt,{size:20})},{href:"/goals",label:"SMART Goals",icon:t.jsx(Sn,{size:20})},{href:"/reframe-coach",label:"Reframe Coach",icon:t.jsx(Rn,{size:20})},{href:"/library",label:"Resource Library",icon:t.jsx(fe,{size:20})},{href:"/reports",label:"My Progress",icon:t.jsx(wn,{size:20})}],console.log("Loaded client navigation items:",s)),t.jsxs(t.Fragment,{children:[a&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>o(!1)}),t.jsx("aside",{className:M("w-64 bg-white shadow-md md:relative fixed inset-y-0 left-0 z-50 transition-transform transform duration-300 ease-in-out",a?"translate-x-0":"-translate-x-full md:translate-x-0"),children:t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsx("div",{className:"p-3 sm:p-4 border-b border-neutral-200",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded bg-primary/20 flex items-center justify-center text-primary",children:t.jsx(Pe,{size:20,className:"sm:w-6 sm:h-6"})}),t.jsx("h1",{className:"text-lg sm:text-xl font-bold text-primary truncate",children:"ResilienceHub"})]})}),t.jsx("div",{className:"p-3 sm:p-4 border-b border-neutral-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-primary-light flex items-center justify-center text-primary",children:((c=e==null?void 0:e.name)==null?void 0:c.charAt(0))||"U"}),t.jsxs("div",{className:"ml-2 sm:ml-3",children:[t.jsx("p",{className:"font-medium text-xs sm:text-sm truncate max-w-[130px]",children:e==null?void 0:e.name}),t.jsx("p",{className:"text-xs text-neutral-500 capitalize",children:(e==null?void 0:e.role)==="therapist"?"therapist":e==null?void 0:e.role})]})]})}),t.jsx("nav",{className:"flex-grow py-2 sm:py-4 overflow-y-auto",children:t.jsx("ul",{children:s.map((l,d)=>l&&t.jsx("li",{className:"px-2 sm:px-4 py-1 sm:py-2",children:t.jsxs(De,{href:l.href,className:M("flex items-center px-2 py-1.5 rounded-md transition-colors text-sm",(l.exact?n===l.href:n===l.href||n.startsWith(l.href+"/"))?"text-primary font-medium bg-primary/10":"text-neutral-600 hover:text-primary hover:bg-primary/5"),onClick:()=>o(!1),children:[t.jsx("span",{className:"mr-2 sm:mr-3 flex-shrink-0",children:l.icon}),t.jsx("span",{className:"truncate",children:l.label})]})},d))})}),t.jsx("div",{className:"p-2 sm:p-4 border-t border-neutral-200",children:t.jsxs("ul",{children:[t.jsx("li",{className:"px-2 py-1 sm:py-2",children:t.jsxs(De,{href:"/settings",className:M("flex items-center px-2 py-1.5 rounded-md transition-colors text-sm",n==="/settings"?"text-primary font-medium bg-primary/10":"text-neutral-600 hover:text-primary hover:bg-primary/5"),onClick:()=>o(!1),children:[t.jsx(Te,{size:18,className:"mr-2 sm:mr-3 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:"Settings"})]})}),t.jsx("li",{className:"px-2 py-1 sm:py-2",children:t.jsxs("button",{onClick:()=>{o(!1),r()},className:"flex items-center px-2 py-1.5 rounded-md transition-colors text-neutral-600 hover:text-primary hover:bg-primary/5 w-full text-left text-sm",children:[t.jsx(En,{size:18,className:"mr-2 sm:mr-3 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:"Logout"})]})})]})})]})}),t.jsx("button",{className:"fixed bottom-4 right-4 md:hidden bg-primary text-white p-3 rounded-full shadow-lg z-50",onClick:()=>o(!a),"aria-label":a?"Close menu":"Open menu",children:a?t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-x",children:[t.jsx("path",{d:"M18 6 6 18"}),t.jsx("path",{d:"m6 6 12 12"})]}):t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-menu",children:[t.jsx("line",{x1:"4",x2:"20",y1:"12",y2:"12"}),t.jsx("line",{x1:"4",x2:"20",y1:"6",y2:"6"}),t.jsx("line",{x1:"4",x2:"20",y1:"18",y2:"18"})]})})]})}const Dn=st("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),V=i.forwardRef(({className:e,variant:r,...n},a)=>t.jsx("div",{ref:a,className:M(Dn({variant:r}),e),...n}));V.displayName="Badge";var Ie=["Enter"," "],Pn=["ArrowDown","PageUp","Home"],yt=["ArrowUp","PageDown","End"],Tn=[...Pn,...yt],In={ltr:[...Ie,"ArrowRight"],rtl:[...Ie,"ArrowLeft"]},An={ltr:["ArrowLeft"],rtl:["ArrowRight"]},le="Menu",[se,kn,On]=en(le),[Y,Ct]=ye(le,[On,it,wt]),Ce=it(),St=wt(),[Ln,q]=Y(le),[zn,ce]=Y(le),Nt=e=>{const{__scopeMenu:r,open:n=!1,children:a,dir:o,onOpenChange:s,modal:c=!0}=e,l=Ce(r),[d,m]=i.useState(null),p=i.useRef(!1),u=U(s),f=bt(o);return i.useEffect(()=>{const x=()=>{p.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>p.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),t.jsx(an,{...l,children:t.jsx(Ln,{scope:r,open:n,onOpenChange:u,content:d,onContentChange:m,children:t.jsx(zn,{scope:r,onClose:i.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:p,dir:f,modal:c,children:a})})})};Nt.displayName=le;var Fn="MenuAnchor",Oe=i.forwardRef((e,r)=>{const{__scopeMenu:n,...a}=e,o=Ce(n);return t.jsx(tn,{...o,...a,ref:r})});Oe.displayName=Fn;var Le="MenuPortal",[$n,jt]=Y(Le,{forceMount:void 0}),Mt=e=>{const{__scopeMenu:r,forceMount:n,children:a,container:o}=e,s=q(Le,r);return t.jsx($n,{scope:r,forceMount:n,children:t.jsx(O,{present:n||s.open,children:t.jsx(dt,{asChild:!0,container:o,children:a})})})};Mt.displayName=Le;var A="MenuContent",[Gn,ze]=Y(A),Rt=i.forwardRef((e,r)=>{const n=jt(A,e.__scopeMenu),{forceMount:a=n.forceMount,...o}=e,s=q(A,e.__scopeMenu),c=ce(A,e.__scopeMenu);return t.jsx(se.Provider,{scope:e.__scopeMenu,children:t.jsx(O,{present:a||s.open,children:t.jsx(se.Slot,{scope:e.__scopeMenu,children:c.modal?t.jsx(Un,{...o,ref:r}):t.jsx(Wn,{...o,ref:r})})})})}),Un=i.forwardRef((e,r)=>{const n=q(A,e.__scopeMenu),a=i.useRef(null),o=P(r,a);return i.useEffect(()=>{const s=a.current;if(s)return ht(s)},[]),t.jsx(Fe,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:b(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Wn=i.forwardRef((e,r)=>{const n=q(A,e.__scopeMenu);return t.jsx(Fe,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Bn=ut("MenuContent.ScrollLock"),Fe=i.forwardRef((e,r)=>{const{__scopeMenu:n,loop:a=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:c,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:m,onPointerDownOutside:p,onFocusOutside:u,onInteractOutside:f,onDismiss:x,disableOutsideScroll:g,...C}=e,j=q(A,n),h=ce(A,n),w=Ce(n),y=St(n),S=kn(n),[T,W]=i.useState(null),$=i.useRef(null),J=P(r,$,j.onContentChange),N=i.useRef(0),E=i.useRef(""),B=i.useRef(0),de=i.useRef(null),Ze=i.useRef("right"),Me=i.useRef(0),Jr=g?vt:i.Fragment,Zr=g?{as:Bn,allowPinchZoom:!0}:void 0,Qr=v=>{var Q,et;const I=E.current+v,z=S().filter(G=>!G.disabled),H=document.activeElement,Re=(Q=z.find(G=>G.ref.current===H))==null?void 0:Q.textValue,Ee=z.map(G=>G.textValue),Qe=ro(Ee,I,Re),re=(et=z.find(G=>G.textValue===Qe))==null?void 0:et.ref.current;(function G(tt){E.current=tt,window.clearTimeout(N.current),tt!==""&&(N.current=window.setTimeout(()=>G(""),1e3))})(I),re&&setTimeout(()=>re.focus())};i.useEffect(()=>()=>window.clearTimeout(N.current),[]),xt();const Z=i.useCallback(v=>{var z,H;return Ze.current===((z=de.current)==null?void 0:z.side)&&oo(v,(H=de.current)==null?void 0:H.area)},[]);return t.jsx(Gn,{scope:n,searchRef:E,onItemEnter:i.useCallback(v=>{Z(v)&&v.preventDefault()},[Z]),onItemLeave:i.useCallback(v=>{var I;Z(v)||((I=$.current)==null||I.focus(),W(null))},[Z]),onTriggerLeave:i.useCallback(v=>{Z(v)&&v.preventDefault()},[Z]),pointerGraceTimerRef:B,onPointerGraceIntentChange:i.useCallback(v=>{de.current=v},[]),children:t.jsx(Jr,{...Zr,children:t.jsx(gt,{asChild:!0,trapped:o,onMountAutoFocus:b(s,v=>{var I;v.preventDefault(),(I=$.current)==null||I.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:t.jsx(lt,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:m,onPointerDownOutside:p,onFocusOutside:u,onInteractOutside:f,onDismiss:x,children:t.jsx(hn,{asChild:!0,...y,dir:h.dir,orientation:"vertical",loop:a,currentTabStopId:T,onCurrentTabStopIdChange:W,onEntryFocus:b(d,v=>{h.isUsingKeyboardRef.current||v.preventDefault()}),preventScrollOnEntryFocus:!0,children:t.jsx(rn,{role:"menu","aria-orientation":"vertical","data-state":Wt(j.open),"data-radix-menu-content":"",dir:h.dir,...w,...C,ref:J,style:{outline:"none",...C.style},onKeyDown:b(C.onKeyDown,v=>{const z=v.target.closest("[data-radix-menu-content]")===v.currentTarget,H=v.ctrlKey||v.altKey||v.metaKey,Re=v.key.length===1;z&&(v.key==="Tab"&&v.preventDefault(),!H&&Re&&Qr(v.key));const Ee=$.current;if(v.target!==Ee||!Tn.includes(v.key))return;v.preventDefault();const re=S().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);yt.includes(v.key)&&re.reverse(),eo(re)}),onBlur:b(e.onBlur,v=>{v.currentTarget.contains(v.target)||(window.clearTimeout(N.current),E.current="")}),onPointerMove:b(e.onPointerMove,ie(v=>{const I=v.target,z=Me.current!==v.clientX;if(v.currentTarget.contains(I)&&z){const H=v.clientX>Me.current?"right":"left";Ze.current=H,Me.current=v.clientX}}))})})})})})})});Rt.displayName=A;var Hn="MenuGroup",$e=i.forwardRef((e,r)=>{const{__scopeMenu:n,...a}=e;return t.jsx(_.div,{role:"group",...a,ref:r})});$e.displayName=Hn;var Vn="MenuLabel",Et=i.forwardRef((e,r)=>{const{__scopeMenu:n,...a}=e;return t.jsx(_.div,{...a,ref:r})});Et.displayName=Vn;var me="MenuItem",nt="menu.itemSelect",Se=i.forwardRef((e,r)=>{const{disabled:n=!1,onSelect:a,...o}=e,s=i.useRef(null),c=ce(me,e.__scopeMenu),l=ze(me,e.__scopeMenu),d=P(r,s),m=i.useRef(!1),p=()=>{const u=s.current;if(!n&&u){const f=new CustomEvent(nt,{bubbles:!0,cancelable:!0});u.addEventListener(nt,x=>a==null?void 0:a(x),{once:!0}),on(u,f),f.defaultPrevented?m.current=!1:c.onClose()}};return t.jsx(_t,{...o,ref:d,disabled:n,onClick:b(e.onClick,p),onPointerDown:u=>{var f;(f=e.onPointerDown)==null||f.call(e,u),m.current=!0},onPointerUp:b(e.onPointerUp,u=>{var f;m.current||(f=u.currentTarget)==null||f.click()}),onKeyDown:b(e.onKeyDown,u=>{const f=l.searchRef.current!=="";n||f&&u.key===" "||Ie.includes(u.key)&&(u.currentTarget.click(),u.preventDefault())})})});Se.displayName=me;var _t=i.forwardRef((e,r)=>{const{__scopeMenu:n,disabled:a=!1,textValue:o,...s}=e,c=ze(me,n),l=St(n),d=i.useRef(null),m=P(r,d),[p,u]=i.useState(!1),[f,x]=i.useState("");return i.useEffect(()=>{const g=d.current;g&&x((g.textContent??"").trim())},[s.children]),t.jsx(se.ItemSlot,{scope:n,disabled:a,textValue:o??f,children:t.jsx(xn,{asChild:!0,...l,focusable:!a,children:t.jsx(_.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...s,ref:m,onPointerMove:b(e.onPointerMove,ie(g=>{a?c.onItemLeave(g):(c.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:b(e.onPointerLeave,ie(g=>c.onItemLeave(g))),onFocus:b(e.onFocus,()=>u(!0)),onBlur:b(e.onBlur,()=>u(!1))})})})}),Kn="MenuCheckboxItem",Dt=i.forwardRef((e,r)=>{const{checked:n=!1,onCheckedChange:a,...o}=e;return t.jsx(kt,{scope:e.__scopeMenu,checked:n,children:t.jsx(Se,{role:"menuitemcheckbox","aria-checked":he(n)?"mixed":n,...o,ref:r,"data-state":Ue(n),onSelect:b(o.onSelect,()=>a==null?void 0:a(he(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Dt.displayName=Kn;var Pt="MenuRadioGroup",[Xn,Yn]=Y(Pt,{value:void 0,onValueChange:()=>{}}),Tt=i.forwardRef((e,r)=>{const{value:n,onValueChange:a,...o}=e,s=U(a);return t.jsx(Xn,{scope:e.__scopeMenu,value:n,onValueChange:s,children:t.jsx($e,{...o,ref:r})})});Tt.displayName=Pt;var It="MenuRadioItem",At=i.forwardRef((e,r)=>{const{value:n,...a}=e,o=Yn(It,e.__scopeMenu),s=n===o.value;return t.jsx(kt,{scope:e.__scopeMenu,checked:s,children:t.jsx(Se,{role:"menuitemradio","aria-checked":s,...a,ref:r,"data-state":Ue(s),onSelect:b(a.onSelect,()=>{var c;return(c=o.onValueChange)==null?void 0:c.call(o,n)},{checkForDefaultPrevented:!1})})})});At.displayName=It;var Ge="MenuItemIndicator",[kt,qn]=Y(Ge,{checked:!1}),Ot=i.forwardRef((e,r)=>{const{__scopeMenu:n,forceMount:a,...o}=e,s=qn(Ge,n);return t.jsx(O,{present:a||he(s.checked)||s.checked===!0,children:t.jsx(_.span,{...o,ref:r,"data-state":Ue(s.checked)})})});Ot.displayName=Ge;var Jn="MenuSeparator",Lt=i.forwardRef((e,r)=>{const{__scopeMenu:n,...a}=e;return t.jsx(_.div,{role:"separator","aria-orientation":"horizontal",...a,ref:r})});Lt.displayName=Jn;var Zn="MenuArrow",zt=i.forwardRef((e,r)=>{const{__scopeMenu:n,...a}=e,o=Ce(n);return t.jsx(nn,{...o,...a,ref:r})});zt.displayName=Zn;var Qn="MenuSub",[Aa,Ft]=Y(Qn),ne="MenuSubTrigger",$t=i.forwardRef((e,r)=>{const n=q(ne,e.__scopeMenu),a=ce(ne,e.__scopeMenu),o=Ft(ne,e.__scopeMenu),s=ze(ne,e.__scopeMenu),c=i.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=s,m={__scopeMenu:e.__scopeMenu},p=i.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return i.useEffect(()=>p,[p]),i.useEffect(()=>{const u=l.current;return()=>{window.clearTimeout(u),d(null)}},[l,d]),t.jsx(Oe,{asChild:!0,...m,children:t.jsx(_t,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":Wt(n.open),...e,ref:ct(r,o.onTriggerChange),onClick:u=>{var f;(f=e.onClick)==null||f.call(e,u),!(e.disabled||u.defaultPrevented)&&(u.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:b(e.onPointerMove,ie(u=>{s.onItemEnter(u),!u.defaultPrevented&&!e.disabled&&!n.open&&!c.current&&(s.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{n.onOpenChange(!0),p()},100))})),onPointerLeave:b(e.onPointerLeave,ie(u=>{var x,g;p();const f=(x=n.content)==null?void 0:x.getBoundingClientRect();if(f){const C=(g=n.content)==null?void 0:g.dataset.side,j=C==="right",h=j?-5:5,w=f[j?"left":"right"],y=f[j?"right":"left"];s.onPointerGraceIntentChange({area:[{x:u.clientX+h,y:u.clientY},{x:w,y:f.top},{x:y,y:f.top},{x:y,y:f.bottom},{x:w,y:f.bottom}],side:C}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(u),u.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:b(e.onKeyDown,u=>{var x;const f=s.searchRef.current!=="";e.disabled||f&&u.key===" "||In[a.dir].includes(u.key)&&(n.onOpenChange(!0),(x=n.content)==null||x.focus(),u.preventDefault())})})})});$t.displayName=ne;var Gt="MenuSubContent",Ut=i.forwardRef((e,r)=>{const n=jt(A,e.__scopeMenu),{forceMount:a=n.forceMount,...o}=e,s=q(A,e.__scopeMenu),c=ce(A,e.__scopeMenu),l=Ft(Gt,e.__scopeMenu),d=i.useRef(null),m=P(r,d);return t.jsx(se.Provider,{scope:e.__scopeMenu,children:t.jsx(O,{present:a||s.open,children:t.jsx(se.Slot,{scope:e.__scopeMenu,children:t.jsx(Fe,{id:l.contentId,"aria-labelledby":l.triggerId,...o,ref:m,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{var u;c.isUsingKeyboardRef.current&&((u=d.current)==null||u.focus()),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:b(e.onFocusOutside,p=>{p.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:b(e.onEscapeKeyDown,p=>{c.onClose(),p.preventDefault()}),onKeyDown:b(e.onKeyDown,p=>{var x;const u=p.currentTarget.contains(p.target),f=An[c.dir].includes(p.key);u&&f&&(s.onOpenChange(!1),(x=l.trigger)==null||x.focus(),p.preventDefault())})})})})})});Ut.displayName=Gt;function Wt(e){return e?"open":"closed"}function he(e){return e==="indeterminate"}function Ue(e){return he(e)?"indeterminate":e?"checked":"unchecked"}function eo(e){const r=document.activeElement;for(const n of e)if(n===r||(n.focus(),document.activeElement!==r))return}function to(e,r){return e.map((n,a)=>e[(r+a)%e.length])}function ro(e,r,n){const o=r.length>1&&Array.from(r).every(m=>m===r[0])?r[0]:r,s=n?e.indexOf(n):-1;let c=to(e,Math.max(s,0));o.length===1&&(c=c.filter(m=>m!==n));const d=c.find(m=>m.toLowerCase().startsWith(o.toLowerCase()));return d!==n?d:void 0}function no(e,r){const{x:n,y:a}=e;let o=!1;for(let s=0,c=r.length-1;s<r.length;c=s++){const l=r[s].x,d=r[s].y,m=r[c].x,p=r[c].y;d>a!=p>a&&n<(m-l)*(a-d)/(p-d)+l&&(o=!o)}return o}function oo(e,r){if(!r)return!1;const n={x:e.clientX,y:e.clientY};return no(n,r)}function ie(e){return r=>r.pointerType==="mouse"?e(r):void 0}var ao=Nt,so=Oe,io=Mt,lo=Rt,co=$e,uo=Et,fo=Se,po=Dt,mo=Tt,ho=At,xo=Ot,go=Lt,vo=zt,bo=$t,wo=Ut,We="DropdownMenu",[yo,ka]=ye(We,[Ct]),D=Ct(),[Co,Bt]=yo(We),Ht=e=>{const{__scopeDropdownMenu:r,children:n,dir:a,open:o,defaultOpen:s,onOpenChange:c,modal:l=!0}=e,d=D(r),m=i.useRef(null),[p=!1,u]=ft({prop:o,defaultProp:s,onChange:c});return t.jsx(Co,{scope:r,triggerId:oe(),triggerRef:m,contentId:oe(),open:p,onOpenChange:u,onOpenToggle:i.useCallback(()=>u(f=>!f),[u]),modal:l,children:t.jsx(ao,{...d,open:p,onOpenChange:u,dir:a,modal:l,children:n})})};Ht.displayName=We;var Vt="DropdownMenuTrigger",Kt=i.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,disabled:a=!1,...o}=e,s=Bt(Vt,n),c=D(n);return t.jsx(so,{asChild:!0,...c,children:t.jsx(_.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...o,ref:ct(r,s.triggerRef),onPointerDown:b(e.onPointerDown,l=>{!a&&l.button===0&&l.ctrlKey===!1&&(s.onOpenToggle(),s.open||l.preventDefault())}),onKeyDown:b(e.onKeyDown,l=>{a||(["Enter"," "].includes(l.key)&&s.onOpenToggle(),l.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Kt.displayName=Vt;var So="DropdownMenuPortal",Xt=e=>{const{__scopeDropdownMenu:r,...n}=e,a=D(r);return t.jsx(io,{...a,...n})};Xt.displayName=So;var Yt="DropdownMenuContent",qt=i.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...a}=e,o=Bt(Yt,n),s=D(n),c=i.useRef(!1);return t.jsx(lo,{id:o.contentId,"aria-labelledby":o.triggerId,...s,...a,ref:r,onCloseAutoFocus:b(e.onCloseAutoFocus,l=>{var d;c.current||(d=o.triggerRef.current)==null||d.focus(),c.current=!1,l.preventDefault()}),onInteractOutside:b(e.onInteractOutside,l=>{const d=l.detail.originalEvent,m=d.button===0&&d.ctrlKey===!0,p=d.button===2||m;(!o.modal||p)&&(c.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});qt.displayName=Yt;var No="DropdownMenuGroup",jo=i.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...a}=e,o=D(n);return t.jsx(co,{...o,...a,ref:r})});jo.displayName=No;var Mo="DropdownMenuLabel",Jt=i.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...a}=e,o=D(n);return t.jsx(uo,{...o,...a,ref:r})});Jt.displayName=Mo;var Ro="DropdownMenuItem",Zt=i.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...a}=e,o=D(n);return t.jsx(fo,{...o,...a,ref:r})});Zt.displayName=Ro;var Eo="DropdownMenuCheckboxItem",Qt=i.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...a}=e,o=D(n);return t.jsx(po,{...o,...a,ref:r})});Qt.displayName=Eo;var _o="DropdownMenuRadioGroup",Do=i.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...a}=e,o=D(n);return t.jsx(mo,{...o,...a,ref:r})});Do.displayName=_o;var Po="DropdownMenuRadioItem",er=i.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...a}=e,o=D(n);return t.jsx(ho,{...o,...a,ref:r})});er.displayName=Po;var To="DropdownMenuItemIndicator",tr=i.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...a}=e,o=D(n);return t.jsx(xo,{...o,...a,ref:r})});tr.displayName=To;var Io="DropdownMenuSeparator",rr=i.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...a}=e,o=D(n);return t.jsx(go,{...o,...a,ref:r})});rr.displayName=Io;var Ao="DropdownMenuArrow",ko=i.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...a}=e,o=D(n);return t.jsx(vo,{...o,...a,ref:r})});ko.displayName=Ao;var Oo="DropdownMenuSubTrigger",nr=i.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...a}=e,o=D(n);return t.jsx(bo,{...o,...a,ref:r})});nr.displayName=Oo;var Lo="DropdownMenuSubContent",or=i.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...a}=e,o=D(n);return t.jsx(wo,{...o,...a,ref:r,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});or.displayName=Lo;var zo=Ht,Fo=Kt,$o=Xt,ar=qt,sr=Jt,ir=Zt,lr=Qt,cr=er,dr=tr,ur=rr,fr=nr,pr=or;const Ae=zo,ke=Fo,Go=i.forwardRef(({className:e,inset:r,children:n,...a},o)=>t.jsxs(fr,{ref:o,className:M("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",e),...a,children:[n,t.jsx(yn,{className:"ml-auto"})]}));Go.displayName=fr.displayName;const Uo=i.forwardRef(({className:e,...r},n)=>t.jsx(pr,{ref:n,className:M("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...r}));Uo.displayName=pr.displayName;const xe=i.forwardRef(({className:e,sideOffset:r=4,...n},a)=>t.jsx($o,{children:t.jsx(ar,{ref:a,sideOffset:r,className:M("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));xe.displayName=ar.displayName;const ae=i.forwardRef(({className:e,inset:r,...n},a)=>t.jsx(ir,{ref:a,className:M("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",e),...n}));ae.displayName=ir.displayName;const Wo=i.forwardRef(({className:e,children:r,checked:n,...a},o)=>t.jsxs(lr,{ref:o,className:M("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...a,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(dr,{children:t.jsx(gn,{className:"h-4 w-4"})})}),r]}));Wo.displayName=lr.displayName;const Bo=i.forwardRef(({className:e,children:r,...n},a)=>t.jsxs(cr,{ref:a,className:M("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(dr,{children:t.jsx(Cn,{className:"h-2 w-2 fill-current"})})}),r]}));Bo.displayName=cr.displayName;const Ho=i.forwardRef(({className:e,inset:r,...n},a)=>t.jsx(sr,{ref:a,className:M("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",e),...n}));Ho.displayName=sr.displayName;const Vo=i.forwardRef(({className:e,...r},n)=>t.jsx(ur,{ref:n,className:M("-mx-1 my-1 h-px bg-muted",e),...r}));Vo.displayName=ur.displayName;function Ko({onClientChange:e}){const{user:r}=we(),{toast:n}=pt(),{viewingClientId:a,viewingClientName:o,setViewingClient:s}=mt(),[c,l]=i.useState([]),[d,m]=i.useState(!1);i.useEffect(()=>{(r==null?void 0:r.role)==="therapist"&&(async()=>{try{const g=await(await fetch(`/api/users/viewing-client-fixed${r!=null&&r.id?`?userId=${r.id}`:""}`,{method:"GET",headers:{"Content-Type":"application/json","X-User-ID":r.id.toString()},credentials:"include"})).json();if(g.viewingClient)s(g.viewingClient.id,g.viewingClient.name);else{const C=localStorage.getItem("viewingClientId"),j=localStorage.getItem("viewingClientName");if(C&&j){const h=parseInt(C);isNaN(h)||(s(h,j),console.log("Used localStorage fallback for viewing client:",j))}}}catch{console.log("Using fallback for client viewing data");const g=localStorage.getItem("viewingClientId"),C=localStorage.getItem("viewingClientName");if(g&&C){const j=parseInt(g);isNaN(j)||s(j,C)}}})()},[r,s]),i.useEffect(()=>{((r==null?void 0:r.role)==="therapist"||(r==null?void 0:r.role)==="admin")&&(async()=>{try{m(!0);const x=r.role==="admin"?"/api/users":"/api/users/clients",C=await(await ee("GET",x)).json();l(C)}catch(x){console.error(`Error fetching ${r.role==="admin"?"users":"clients"}:`,x),n({title:"Error",description:`Failed to load ${r.role==="admin"?"users":"clients"} list`,variant:"destructive"})}finally{m(!1)}})()},[r,n]);const p=async(f,x)=>{try{const C=await(await ee("POST","/api/users/current-viewing-client",{clientId:f})).json();s(f,x),e&&e(f),n({title:"Client Selected",description:`You are now viewing ${x}'s data`}),window.location.reload()}catch(g){console.error("Error setting current viewing client:",g),n({title:"Error",description:"Failed to select client",variant:"destructive"})}},u=async()=>{try{const x=await(await ee("POST","/api/users/current-viewing-client",{clientId:null})).json();localStorage.removeItem("viewingClientId"),localStorage.removeItem("viewingClientName"),s(null,null),e&&e(null),n({title:"Returned to Self",description:"You are now viewing your own dashboard"}),window.location.reload()}catch(f){console.error("Error clearing current viewing client:",f),n({title:"Error",description:"Failed to return to your dashboard",variant:"destructive"})}};return r?r.role==="client"?t.jsx("div",{className:"flex items-center",children:t.jsx(V,{variant:"outline",className:"mr-2 bg-blue-50 text-blue-700 border-blue-200",children:"Client"})}):r.role==="therapist"?t.jsx("div",{className:"flex items-center",children:a?t.jsxs("div",{className:"flex items-center",children:[t.jsx(V,{variant:"outline",className:"mr-2 bg-yellow-50 text-yellow-700 border-yellow-200",children:"Viewing Client"}),t.jsxs(Ae,{children:[t.jsx(ke,{asChild:!0,children:t.jsx(K,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:t.jsx("span",{className:"truncate max-w-[150px]",children:o})})}),t.jsxs(xe,{align:"end",className:"w-[200px]",children:[t.jsx(ae,{onClick:u,children:"Return to my dashboard"}),t.jsx("div",{className:"px-2 py-1.5 text-xs font-medium text-muted-foreground",children:"Switch Client"}),c.map(f=>t.jsx(ae,{onClick:()=>p(f.id,f.name),children:f.name},f.id))]})]})]}):t.jsxs("div",{className:"flex items-center",children:[t.jsx(V,{variant:"outline",className:"mr-2 bg-green-50 text-green-700 border-green-200",children:"Therapist"}),t.jsxs(Ae,{children:[t.jsx(ke,{asChild:!0,children:t.jsxs(K,{variant:"outline",size:"sm",className:"h-8",children:[t.jsx(pe,{className:"mr-1 h-4 w-4"}),t.jsx("span",{children:"My Clients"})]})}),t.jsxs(xe,{align:"end",className:"w-[200px]",children:[t.jsx("div",{className:"px-2 py-1.5 text-xs font-medium text-muted-foreground",children:"View Client Data"}),d?t.jsx("div",{className:"flex justify-center p-2",children:t.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary border-t-transparent rounded-full"})}):c.length>0?c.map(f=>t.jsx(ae,{onClick:()=>p(f.id,f.name),children:f.name},f.id)):t.jsx("div",{className:"px-2 py-4 text-center text-sm text-muted-foreground",children:"No clients found"})]})]})]})}):r.role==="admin"?t.jsx("div",{className:"flex items-center",children:t.jsx(V,{variant:"outline",className:"mr-2 bg-purple-50 text-purple-700 border-purple-200",children:"Administrator"})}):t.jsx("div",{className:"flex items-center",children:t.jsx(V,{variant:"outline",className:"mr-2 bg-gray-50 text-gray-700 border-gray-200",children:r.role||"User"})}):null}function Xo(e,r){return i.useReducer((n,a)=>r[n][a]??n,e)}var Be="ScrollArea",[mr,Oa]=ye(Be),[Yo,k]=mr(Be),hr=i.forwardRef((e,r)=>{const{__scopeScrollArea:n,type:a="hover",dir:o,scrollHideDelay:s=600,...c}=e,[l,d]=i.useState(null),[m,p]=i.useState(null),[u,f]=i.useState(null),[x,g]=i.useState(null),[C,j]=i.useState(null),[h,w]=i.useState(0),[y,S]=i.useState(0),[T,W]=i.useState(!1),[$,J]=i.useState(!1),N=P(r,B=>d(B)),E=bt(o);return t.jsx(Yo,{scope:n,type:a,dir:E,scrollHideDelay:s,scrollArea:l,viewport:m,onViewportChange:p,content:u,onContentChange:f,scrollbarX:x,onScrollbarXChange:g,scrollbarXEnabled:T,onScrollbarXEnabledChange:W,scrollbarY:C,onScrollbarYChange:j,scrollbarYEnabled:$,onScrollbarYEnabledChange:J,onCornerWidthChange:w,onCornerHeightChange:S,children:t.jsx(_.div,{dir:E,...c,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":h+"px","--radix-scroll-area-corner-height":y+"px",...e.style}})})});hr.displayName=Be;var xr="ScrollAreaViewport",gr=i.forwardRef((e,r)=>{const{__scopeScrollArea:n,children:a,nonce:o,...s}=e,c=k(xr,n),l=i.useRef(null),d=P(r,l,c.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),t.jsx(_.div,{"data-radix-scroll-area-viewport":"",...s,ref:d,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...e.style},children:t.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});gr.displayName=xr;var F="ScrollAreaScrollbar",He=i.forwardRef((e,r)=>{const{forceMount:n,...a}=e,o=k(F,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:c}=o,l=e.orientation==="horizontal";return i.useEffect(()=>(l?s(!0):c(!0),()=>{l?s(!1):c(!1)}),[l,s,c]),o.type==="hover"?t.jsx(qo,{...a,ref:r,forceMount:n}):o.type==="scroll"?t.jsx(Jo,{...a,ref:r,forceMount:n}):o.type==="auto"?t.jsx(vr,{...a,ref:r,forceMount:n}):o.type==="always"?t.jsx(Ve,{...a,ref:r}):null});He.displayName=F;var qo=i.forwardRef((e,r)=>{const{forceMount:n,...a}=e,o=k(F,e.__scopeScrollArea),[s,c]=i.useState(!1);return i.useEffect(()=>{const l=o.scrollArea;let d=0;if(l){const m=()=>{window.clearTimeout(d),c(!0)},p=()=>{d=window.setTimeout(()=>c(!1),o.scrollHideDelay)};return l.addEventListener("pointerenter",m),l.addEventListener("pointerleave",p),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",m),l.removeEventListener("pointerleave",p)}}},[o.scrollArea,o.scrollHideDelay]),t.jsx(O,{present:n||s,children:t.jsx(vr,{"data-state":s?"visible":"hidden",...a,ref:r})})}),Jo=i.forwardRef((e,r)=>{const{forceMount:n,...a}=e,o=k(F,e.__scopeScrollArea),s=e.orientation==="horizontal",c=je(()=>d("SCROLL_END"),100),[l,d]=Xo("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return i.useEffect(()=>{if(l==="idle"){const m=window.setTimeout(()=>d("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(m)}},[l,o.scrollHideDelay,d]),i.useEffect(()=>{const m=o.viewport,p=s?"scrollLeft":"scrollTop";if(m){let u=m[p];const f=()=>{const x=m[p];u!==x&&(d("SCROLL"),c()),u=x};return m.addEventListener("scroll",f),()=>m.removeEventListener("scroll",f)}},[o.viewport,s,d,c]),t.jsx(O,{present:n||l!=="hidden",children:t.jsx(Ve,{"data-state":l==="hidden"?"hidden":"visible",...a,ref:r,onPointerEnter:b(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:b(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),vr=i.forwardRef((e,r)=>{const n=k(F,e.__scopeScrollArea),{forceMount:a,...o}=e,[s,c]=i.useState(!1),l=e.orientation==="horizontal",d=je(()=>{if(n.viewport){const m=n.viewport.offsetWidth<n.viewport.scrollWidth,p=n.viewport.offsetHeight<n.viewport.scrollHeight;c(l?m:p)}},10);return te(n.viewport,d),te(n.content,d),t.jsx(O,{present:a||s,children:t.jsx(Ve,{"data-state":s?"visible":"hidden",...o,ref:r})})}),Ve=i.forwardRef((e,r)=>{const{orientation:n="vertical",...a}=e,o=k(F,e.__scopeScrollArea),s=i.useRef(null),c=i.useRef(0),[l,d]=i.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=Sr(l.viewport,l.content),p={...a,sizes:l,onSizesChange:d,hasThumb:m>0&&m<1,onThumbChange:f=>s.current=f,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:f=>c.current=f};function u(f,x){return na(f,c.current,l,x)}return n==="horizontal"?t.jsx(Zo,{...p,ref:r,onThumbPositionChange:()=>{if(o.viewport&&s.current){const f=o.viewport.scrollLeft,x=ot(f,l,o.dir);s.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:f=>{o.viewport&&(o.viewport.scrollLeft=f)},onDragScroll:f=>{o.viewport&&(o.viewport.scrollLeft=u(f,o.dir))}}):n==="vertical"?t.jsx(Qo,{...p,ref:r,onThumbPositionChange:()=>{if(o.viewport&&s.current){const f=o.viewport.scrollTop,x=ot(f,l);s.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:f=>{o.viewport&&(o.viewport.scrollTop=f)},onDragScroll:f=>{o.viewport&&(o.viewport.scrollTop=u(f))}}):null}),Zo=i.forwardRef((e,r)=>{const{sizes:n,onSizesChange:a,...o}=e,s=k(F,e.__scopeScrollArea),[c,l]=i.useState(),d=i.useRef(null),m=P(r,d,s.onScrollbarXChange);return i.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),t.jsx(wr,{"data-orientation":"horizontal",...o,ref:m,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ne(n)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.x),onDragScroll:p=>e.onDragScroll(p.x),onWheelScroll:(p,u)=>{if(s.viewport){const f=s.viewport.scrollLeft+p.deltaX;e.onWheelScroll(f),jr(f,u)&&p.preventDefault()}},onResize:()=>{d.current&&s.viewport&&c&&a({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:ve(c.paddingLeft),paddingEnd:ve(c.paddingRight)}})}})}),Qo=i.forwardRef((e,r)=>{const{sizes:n,onSizesChange:a,...o}=e,s=k(F,e.__scopeScrollArea),[c,l]=i.useState(),d=i.useRef(null),m=P(r,d,s.onScrollbarYChange);return i.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),t.jsx(wr,{"data-orientation":"vertical",...o,ref:m,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ne(n)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.y),onDragScroll:p=>e.onDragScroll(p.y),onWheelScroll:(p,u)=>{if(s.viewport){const f=s.viewport.scrollTop+p.deltaY;e.onWheelScroll(f),jr(f,u)&&p.preventDefault()}},onResize:()=>{d.current&&s.viewport&&c&&a({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:ve(c.paddingTop),paddingEnd:ve(c.paddingBottom)}})}})}),[ea,br]=mr(F),wr=i.forwardRef((e,r)=>{const{__scopeScrollArea:n,sizes:a,hasThumb:o,onThumbChange:s,onThumbPointerUp:c,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:m,onWheelScroll:p,onResize:u,...f}=e,x=k(F,n),[g,C]=i.useState(null),j=P(r,N=>C(N)),h=i.useRef(null),w=i.useRef(""),y=x.viewport,S=a.content-a.viewport,T=U(p),W=U(d),$=je(u,10);function J(N){if(h.current){const E=N.clientX-h.current.left,B=N.clientY-h.current.top;m({x:E,y:B})}}return i.useEffect(()=>{const N=E=>{const B=E.target;(g==null?void 0:g.contains(B))&&T(E,S)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[y,g,S,T]),i.useEffect(W,[a,W]),te(g,$),te(x.content,$),t.jsx(ea,{scope:n,scrollbar:g,hasThumb:o,onThumbChange:U(s),onThumbPointerUp:U(c),onThumbPositionChange:W,onThumbPointerDown:U(l),children:t.jsx(_.div,{...f,ref:j,style:{position:"absolute",...f.style},onPointerDown:b(e.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),h.current=g.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),J(N))}),onPointerMove:b(e.onPointerMove,J),onPointerUp:b(e.onPointerUp,N=>{const E=N.target;E.hasPointerCapture(N.pointerId)&&E.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=w.current,x.viewport&&(x.viewport.style.scrollBehavior=""),h.current=null})})})}),ge="ScrollAreaThumb",yr=i.forwardRef((e,r)=>{const{forceMount:n,...a}=e,o=br(ge,e.__scopeScrollArea);return t.jsx(O,{present:n||o.hasThumb,children:t.jsx(ta,{ref:r,...a})})}),ta=i.forwardRef((e,r)=>{const{__scopeScrollArea:n,style:a,...o}=e,s=k(ge,n),c=br(ge,n),{onThumbPositionChange:l}=c,d=P(r,u=>c.onThumbChange(u)),m=i.useRef(void 0),p=je(()=>{m.current&&(m.current(),m.current=void 0)},100);return i.useEffect(()=>{const u=s.viewport;if(u){const f=()=>{if(p(),!m.current){const x=oa(u,l);m.current=x,l()}};return l(),u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[s.viewport,p,l]),t.jsx(_.div,{"data-state":c.hasThumb?"visible":"hidden",...o,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:b(e.onPointerDownCapture,u=>{const x=u.target.getBoundingClientRect(),g=u.clientX-x.left,C=u.clientY-x.top;c.onThumbPointerDown({x:g,y:C})}),onPointerUp:b(e.onPointerUp,c.onThumbPointerUp)})});yr.displayName=ge;var Ke="ScrollAreaCorner",Cr=i.forwardRef((e,r)=>{const n=k(Ke,e.__scopeScrollArea),a=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&a?t.jsx(ra,{...e,ref:r}):null});Cr.displayName=Ke;var ra=i.forwardRef((e,r)=>{const{__scopeScrollArea:n,...a}=e,o=k(Ke,n),[s,c]=i.useState(0),[l,d]=i.useState(0),m=!!(s&&l);return te(o.scrollbarX,()=>{var u;const p=((u=o.scrollbarX)==null?void 0:u.offsetHeight)||0;o.onCornerHeightChange(p),d(p)}),te(o.scrollbarY,()=>{var u;const p=((u=o.scrollbarY)==null?void 0:u.offsetWidth)||0;o.onCornerWidthChange(p),c(p)}),m?t.jsx(_.div,{...a,ref:r,style:{width:s,height:l,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function ve(e){return e?parseInt(e,10):0}function Sr(e,r){const n=e/r;return isNaN(n)?0:n}function Ne(e){const r=Sr(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=(e.scrollbar.size-n)*r;return Math.max(a,18)}function na(e,r,n,a="ltr"){const o=Ne(n),s=o/2,c=r||s,l=o-c,d=n.scrollbar.paddingStart+c,m=n.scrollbar.size-n.scrollbar.paddingEnd-l,p=n.content-n.viewport,u=a==="ltr"?[0,p]:[p*-1,0];return Nr([d,m],u)(e)}function ot(e,r,n="ltr"){const a=Ne(r),o=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,s=r.scrollbar.size-o,c=r.content-r.viewport,l=s-a,d=n==="ltr"?[0,c]:[c*-1,0],m=mn(e,d);return Nr([0,c],[0,l])(m)}function Nr(e,r){return n=>{if(e[0]===e[1]||r[0]===r[1])return r[0];const a=(r[1]-r[0])/(e[1]-e[0]);return r[0]+a*(n-e[0])}}function jr(e,r){return e>0&&e<r}var oa=(e,r=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},a=0;return function o(){const s={left:e.scrollLeft,top:e.scrollTop},c=n.left!==s.left,l=n.top!==s.top;(c||l)&&r(),n=s,a=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(a)};function je(e,r){const n=U(e),a=i.useRef(0);return i.useEffect(()=>()=>window.clearTimeout(a.current),[]),i.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(n,r)},[n,r])}function te(e,r){const n=U(r);sn(()=>{let a=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(n)});return o.observe(e),()=>{window.cancelAnimationFrame(a),o.unobserve(e)}}},[e,n])}var Mr=hr,aa=gr,sa=Cr;const Rr=i.forwardRef(({className:e,children:r,...n},a)=>t.jsxs(Mr,{ref:a,className:M("relative overflow-hidden",e),...n,children:[t.jsx(aa,{className:"h-full w-full rounded-[inherit]",children:r}),t.jsx(Er,{}),t.jsx(sa,{})]}));Rr.displayName=Mr.displayName;const Er=i.forwardRef(({className:e,orientation:r="vertical",...n},a)=>t.jsx(He,{ref:a,orientation:r,className:M("flex touch-none select-none transition-colors",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:t.jsx(yr,{className:"relative flex-1 rounded-full bg-border"})}));Er.displayName=He.displayName;function ia(){const[e,r]=i.useState([]),[n,a]=i.useState(0),[o,s]=i.useState(!1),{toast:c}=pt(),{user:l}=we(),{lastMessage:d,isConnected:m}=ln();i.useEffect(()=>{o&&p()},[o]),i.useEffect(()=>{if(l!=null&&l.id){u();const h=setInterval(u,6e4);return()=>clearInterval(h)}else a(0),r([])},[l==null?void 0:l.id]),i.useEffect(()=>{var h,w;if(d&&d.data)try{const y=typeof d.data=="string"?JSON.parse(d.data):d.data;y.type==="new_notification"&&(a(S=>S+1),o&&y.notification&&r(S=>[y.notification,...S]),c({title:((h=y.notification)==null?void 0:h.title)||"New Notification",description:((w=y.notification)==null?void 0:w.body)||"",duration:5e3}))}catch(y){console.error("Error parsing WebSocket message:",y)}},[d,o,c]);async function p(){try{const h=await ee("GET","/api/notifications?limit=10");if(h.ok){const w=await h.json();r(w)}}catch(h){console.error("Error fetching notifications:",h)}}async function u(){try{if(!(l!=null&&l.id)){a(0);return}const h=`/api/notifications/unread?_t=${Date.now()}`,w=await fetch(h,{method:"GET",headers:{"X-User-ID":l.id.toString(),"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","X-Timestamp":Date.now().toString()},credentials:"include"});if(w.ok)try{const y=await w.json();Array.isArray(y)?a(y.length):a(0)}catch{console.error("Error parsing unread count response"),a(0)}}catch{console.error("Error fetching unread count - will retry later")}}async function f(h){try{(await ee("POST",`/api/notifications/read/${h}`)).ok&&(r(e.map(y=>y.id===h?{...y,isRead:!0}:y)),a(y=>Math.max(0,y-1)),setTimeout(()=>u(),500))}catch(w){console.error("Error marking notification as read:",w)}}async function x(){var h;try{const w=Date.now();r(e.map(S=>({...S,isRead:!0}))),a(0),(await fetch(`/api/notifications/read-all?_t=${w}`,{method:"POST",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","X-Timestamp":w.toString(),"X-User-ID":((h=l==null?void 0:l.id)==null?void 0:h.toString())||""},credentials:"include"})).ok&&(setTimeout(()=>{u()},1e3),c({title:"Success",description:"All notifications marked as read"}))}catch(w){console.error("Error marking all notifications as read:",w),c({title:"Error",description:"Failed to mark notifications as read",variant:"destructive"})}}async function g(h){try{if((await ee("DELETE",`/api/notifications/${h}`)).ok){const y=e.filter(T=>T.id!==h);r(y);const S=e.find(T=>T.id===h);S&&!S.isRead&&a(T=>Math.max(0,T-1)),setTimeout(()=>u(),500),c({title:"Success",description:"Notification deleted"})}}catch(w){console.error("Error deleting notification:",w),c({title:"Error",description:"Failed to delete notification",variant:"destructive"})}}function C(h){const w=new Date(h),S=Math.floor((new Date().getTime()-w.getTime())/(1e3*60));return S<1?"Just now":S<60?`${S}m ago`:S<1440?`${Math.floor(S/60)}h ago`:`${Math.floor(S/1440)}d ago`}function j(h){switch(h){case"reminder":return"text-blue-600";case"alert":return"text-red-600";case"system":return"text-gray-600";case"therapist_message":return"text-green-600";default:return"text-gray-600"}}return t.jsxs(Ae,{open:o,onOpenChange:s,children:[t.jsx(ke,{asChild:!0,children:t.jsxs(K,{variant:"ghost",size:"sm",className:"relative",children:[t.jsx(bn,{className:"h-4 w-4"}),n>0&&t.jsx(V,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center text-xs p-0",children:n>99?"99+":n})]})}),t.jsxs(xe,{align:"end",className:"w-80",children:[t.jsxs("div",{className:"flex items-center justify-between p-2 border-b",children:[t.jsx("h3",{className:"font-semibold",children:"Notifications"}),t.jsx("div",{className:"flex gap-2",children:e.some(h=>!h.isRead)&&t.jsx(K,{variant:"ghost",size:"sm",onClick:x,className:"text-xs",children:"Mark all read"})})]}),t.jsx(Rr,{className:"max-h-80",children:e.length===0?t.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):e.map(h=>t.jsx(ae,{className:"p-3 block",children:t.jsx("div",{className:`space-y-1 ${h.isRead?"":"bg-blue-50"} rounded p-2`,onClick:()=>!h.isRead&&f(h.id),children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h4",{className:`text-sm font-medium ${j(h.type)}`,children:h.title}),!h.isRead&&t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:h.body}),t.jsxs("div",{className:"flex items-center justify-between mt-2",children:[t.jsx("span",{className:"text-xs text-muted-foreground",children:C(h.createdAt)}),t.jsx(K,{variant:"ghost",size:"sm",onClick:w=>{w.stopPropagation(),g(h.id)},className:"text-xs p-1 h-auto",children:"Delete"})]})]})})})},h.id))})]})]})}var Xe="Dialog",[_r,La]=ye(Xe),[la,L]=_r(Xe),Dr=e=>{const{__scopeDialog:r,children:n,open:a,defaultOpen:o,onOpenChange:s,modal:c=!0}=e,l=i.useRef(null),d=i.useRef(null),[m=!1,p]=ft({prop:a,defaultProp:o,onChange:s});return t.jsx(la,{scope:r,triggerRef:l,contentRef:d,contentId:oe(),titleId:oe(),descriptionId:oe(),open:m,onOpenChange:p,onOpenToggle:i.useCallback(()=>p(u=>!u),[p]),modal:c,children:n})};Dr.displayName=Xe;var Pr="DialogTrigger",Tr=i.forwardRef((e,r)=>{const{__scopeDialog:n,...a}=e,o=L(Pr,n),s=P(r,o.triggerRef);return t.jsx(_.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Je(o.open),...a,ref:s,onClick:b(e.onClick,o.onOpenToggle)})});Tr.displayName=Pr;var Ye="DialogPortal",[ca,Ir]=_r(Ye,{forceMount:void 0}),Ar=e=>{const{__scopeDialog:r,forceMount:n,children:a,container:o}=e,s=L(Ye,r);return t.jsx(ca,{scope:r,forceMount:n,children:i.Children.map(a,c=>t.jsx(O,{present:n||s.open,children:t.jsx(dt,{asChild:!0,container:o,children:c})}))})};Ar.displayName=Ye;var be="DialogOverlay",kr=i.forwardRef((e,r)=>{const n=Ir(be,e.__scopeDialog),{forceMount:a=n.forceMount,...o}=e,s=L(be,e.__scopeDialog);return s.modal?t.jsx(O,{present:a||s.open,children:t.jsx(ua,{...o,ref:r})}):null});kr.displayName=be;var da=ut("DialogOverlay.RemoveScroll"),ua=i.forwardRef((e,r)=>{const{__scopeDialog:n,...a}=e,o=L(be,n);return t.jsx(vt,{as:da,allowPinchZoom:!0,shards:[o.contentRef],children:t.jsx(_.div,{"data-state":Je(o.open),...a,ref:r,style:{pointerEvents:"auto",...a.style}})})}),X="DialogContent",Or=i.forwardRef((e,r)=>{const n=Ir(X,e.__scopeDialog),{forceMount:a=n.forceMount,...o}=e,s=L(X,e.__scopeDialog);return t.jsx(O,{present:a||s.open,children:s.modal?t.jsx(fa,{...o,ref:r}):t.jsx(pa,{...o,ref:r})})});Or.displayName=X;var fa=i.forwardRef((e,r)=>{const n=L(X,e.__scopeDialog),a=i.useRef(null),o=P(r,n.contentRef,a);return i.useEffect(()=>{const s=a.current;if(s)return ht(s)},[]),t.jsx(Lr,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:b(e.onCloseAutoFocus,s=>{var c;s.preventDefault(),(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:b(e.onPointerDownOutside,s=>{const c=s.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0;(c.button===2||l)&&s.preventDefault()}),onFocusOutside:b(e.onFocusOutside,s=>s.preventDefault())})}),pa=i.forwardRef((e,r)=>{const n=L(X,e.__scopeDialog),a=i.useRef(!1),o=i.useRef(!1);return t.jsx(Lr,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var c,l;(c=e.onCloseAutoFocus)==null||c.call(e,s),s.defaultPrevented||(a.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),a.current=!1,o.current=!1},onInteractOutside:s=>{var d,m;(d=e.onInteractOutside)==null||d.call(e,s),s.defaultPrevented||(a.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const c=s.target;((m=n.triggerRef.current)==null?void 0:m.contains(c))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),Lr=i.forwardRef((e,r)=>{const{__scopeDialog:n,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:s,...c}=e,l=L(X,n),d=i.useRef(null),m=P(r,d);return xt(),t.jsxs(t.Fragment,{children:[t.jsx(gt,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:o,onUnmountAutoFocus:s,children:t.jsx(lt,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Je(l.open),...c,ref:m,onDismiss:()=>l.onOpenChange(!1)})}),t.jsxs(t.Fragment,{children:[t.jsx(ma,{titleId:l.titleId}),t.jsx(xa,{contentRef:d,descriptionId:l.descriptionId})]})]})}),qe="DialogTitle",zr=i.forwardRef((e,r)=>{const{__scopeDialog:n,...a}=e,o=L(qe,n);return t.jsx(_.h2,{id:o.titleId,...a,ref:r})});zr.displayName=qe;var Fr="DialogDescription",$r=i.forwardRef((e,r)=>{const{__scopeDialog:n,...a}=e,o=L(Fr,n);return t.jsx(_.p,{id:o.descriptionId,...a,ref:r})});$r.displayName=Fr;var Gr="DialogClose",Ur=i.forwardRef((e,r)=>{const{__scopeDialog:n,...a}=e,o=L(Gr,n);return t.jsx(_.button,{type:"button",...a,ref:r,onClick:b(e.onClick,()=>o.onOpenChange(!1))})});Ur.displayName=Gr;function Je(e){return e?"open":"closed"}var Wr="DialogTitleWarning",[za,Br]=cn(Wr,{contentName:X,titleName:qe,docsSlug:"dialog"}),ma=({titleId:e})=>{const r=Br(Wr),n=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return i.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},ha="DialogDescriptionWarning",xa=({contentRef:e,descriptionId:r})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Br(ha).contentName}}.`;return i.useEffect(()=>{var s;const o=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");r&&o&&(document.getElementById(r)||console.warn(a))},[a,e,r]),null},ga=Dr,va=Tr,ba=Ar,Hr=kr,Vr=Or,Kr=zr,Xr=$r,wa=Ur;const ya=ga,Ca=va,Sa=ba,Yr=i.forwardRef(({className:e,...r},n)=>t.jsx(Hr,{className:M("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...r,ref:n}));Yr.displayName=Hr.displayName;const Na=st("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),qr=i.forwardRef(({side:e="right",className:r,children:n,...a},o)=>t.jsxs(Sa,{children:[t.jsx(Yr,{}),t.jsxs(Vr,{ref:o,className:M(Na({side:e}),r),...a,children:[n,t.jsxs(wa,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[t.jsx(dn,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));qr.displayName=Vr.displayName;const ja=i.forwardRef(({className:e,...r},n)=>t.jsx(Kr,{ref:n,className:M("text-lg font-semibold text-foreground",e),...r}));ja.displayName=Kr.displayName;const Ma=i.forwardRef(({className:e,...r},n)=>t.jsx(Xr,{ref:n,className:M("text-sm text-muted-foreground",e),...r}));Ma.displayName=Xr.displayName;function Ra({className:e}){const[r,n]=i.useState(!1),[a]=at(),{user:o}=we(),s=[{href:"/dashboard",icon:jn,label:"Dashboard"},{href:"/emotion-tracking",icon:ue,label:"Track Emotions"},{href:"/thought-records",icon:Pe,label:"Thought Records"},{href:"/journal",icon:fe,label:"Journal"},{href:"/goals",icon:fn,label:"Goals"},{href:"/reports",icon:pn,label:"Reports"},{href:"/resources",icon:Mn,label:"Resources"}];((o==null?void 0:o.role)==="therapist"||(o==null?void 0:o.role)==="admin")&&s.push({href:"/clients",icon:pe,label:"Clients"}),(o==null?void 0:o.role)==="admin"&&s.push({href:"/admin",icon:Te,label:"Admin"}),s.push({href:"/settings",icon:Te,label:"Settings"});const c=l=>l==="/dashboard"?a==="/"||a==="/dashboard":a.startsWith(l);return t.jsx("div",{className:`md:hidden ${e}`,children:t.jsxs(ya,{open:r,onOpenChange:n,children:[t.jsx(Ca,{asChild:!0,children:t.jsxs(K,{variant:"ghost",size:"icon",className:"relative",children:[t.jsx(_n,{className:"h-6 w-6"}),t.jsx("span",{className:"sr-only",children:"Open navigation menu"})]})}),t.jsx(qr,{side:"left",className:"w-72 p-0",children:t.jsxs("div",{className:"flex h-full flex-col",children:[t.jsx("div",{className:"flex h-14 items-center border-b px-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary"}),t.jsx("span",{className:"text-lg font-semibold",children:"ResilienceHub"})]})}),t.jsx("nav",{className:"flex-1 space-y-1 p-4",children:s.map(l=>{const d=l.icon;return t.jsx(De,{href:l.href,onClick:()=>n(!1),children:t.jsxs("div",{className:`flex items-center space-x-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors ${c(l.href)?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"}`,children:[t.jsx(d,{className:"h-5 w-5"}),t.jsx("span",{children:l.label})]})},l.href)})}),t.jsx("div",{className:"border-t p-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"h-8 w-8 rounded-full bg-muted"}),t.jsxs("div",{className:"flex-1 space-y-1",children:[t.jsx("p",{className:"text-sm font-medium",children:o==null?void 0:o.name}),t.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:o==null?void 0:o.role})]})]})})]})})]})})}function Fa({title:e}){const[r,n]=i.useState(!1),{setViewingClient:a,viewingClientName:o}=mt(),s=l=>{},c=o?`${o}'s Dashboard`:e;return t.jsxs("header",{className:"bg-white shadow-sm",children:[t.jsxs("div",{className:"flex items-center justify-between px-2 sm:px-4 py-3",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ra,{className:"mr-2"}),t.jsx("h2",{className:"text-lg font-medium truncate max-w-[180px] sm:max-w-xs md:max-w-full",children:c})]}),t.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 md:gap-4",children:[t.jsx("div",{className:"hidden sm:block",children:t.jsx(Ko,{onClientChange:s})}),t.jsx("div",{className:"relative",children:t.jsx(ia,{})}),t.jsx("div",{className:"hidden sm:block",children:t.jsx(K,{variant:"ghost",size:"icon",className:"text-neutral-500 hover:text-primary focus:outline-none",onClick:()=>n(!r),children:t.jsx(Nn,{size:20})})})]})]}),r&&t.jsx("div",{className:"absolute top-16 right-4 z-50 bg-white shadow-lg rounded-lg p-4 border border-neutral-200 w-48",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{className:M("w-full text-left py-2 px-3 rounded-md","bg-primary/10 text-primary"),children:"English"}),t.jsx("button",{className:"w-full text-left py-2 px-3 rounded-md hover:bg-neutral-100",children:" (Arabic)"}),t.jsx("button",{className:"w-full text-left py-2 px-3 rounded-md hover:bg-neutral-100",children:"Espaol (Spanish)"}),t.jsx("button",{className:"w-full text-left py-2 px-3 rounded-md hover:bg-neutral-100",children:"Franais (French)"})]})}),o&&t.jsxs("div",{className:"bg-yellow-100 text-yellow-800 px-4 py-1 text-sm text-center",children:["You are viewing ",o,"'s data in read-only mode"]})]})}export{vn as A,V as B,wn as C,Ae as D,Sn as F,Nn as G,jn as H,Rn as L,Hr as O,ba as P,ga as R,Ia as S,va as T,pe as U,za as W,yn as a,ke as b,xe as c,ae as d,Vo as e,fe as f,En as g,Fa as h,La as i,Vr as j,Kr as k,Xr as l,wa as m,Te as n,bn as o,Rr as p};
