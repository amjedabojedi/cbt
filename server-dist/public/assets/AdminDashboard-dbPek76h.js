import{c as y,m as b,u as A,n as U,r as p,j as e,i as k,C as a,e as i,f as r,g as c,a as l,h as R}from"./index-BJDVYPr2.js";import{L as N}from"./Layout-MHH3-5YO.js";import{T as E,a as S,b as h,c as j}from"./tabs-DZkkmdmK.js";import{U as u,F as G,f as W}from"./Header-HmO9KIvP.js";import{A as D}from"./activity-B2O4100s.js";import{U as L}from"./user-check-CnUqHDMm.js";import{T as g}from"./triangle-alert-B6ZFxm6X.js";import{H as B,B as P}from"./target-7abParum.js";import"./index-epKMAjhH.js";import"./index-ZMpGrT0S.js";import"./check-CPyQFfyd.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=y("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=y("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),t=({title:v,value:d,description:n,icon:o,colorClass:s="text-primary"})=>e.jsxs(a,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:v}),e.jsx("div",{className:`${s}`,children:o})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n})]})]});function J(){const[v,d]=b(),{user:n}=A(),{toast:o}=U(),[s,C]=p.useState({totalUsers:0,totalClients:0,totalTherapists:0,totalEmotions:0,totalThoughts:0,totalGoals:0,activeClients:0,activeTherapists:0,resourceUsage:0,clientsWithoutTherapist:0,therapistsWithoutClients:0,clientsWithGoals:0,averageGoalsPerClient:0,averageEmotionsPerClient:0,mostActiveTherapist:"",mostActiveClient:"",mostUsedResource:""}),[w,f]=p.useState(!0);return p.useEffect(()=>{if(n&&n.role!=="admin"){o({title:"Access Denied",description:"You do not have permission to access this page.",variant:"destructive"}),d("/");return}(async()=>{try{f(!0);const T=await(await R("GET","/api/admin/stats")).json();C(T)}catch(x){console.error("Error fetching stats:",x),o({title:"Error",description:"Failed to load dashboard data",variant:"destructive"})}finally{f(!1)}})()},[n,d,o]),w?e.jsx(N,{title:"Admin Dashboard",children:e.jsx("div",{className:"flex items-center justify-center min-h-[500px]",children:e.jsx(k,{className:"h-8 w-8 animate-spin text-primary"})})}):e.jsx(N,{title:"Admin Dashboard",children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"System-wide overview and statistics"})]}),e.jsxs(E,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(S,{children:[e.jsx(h,{value:"overview",children:"Overview"}),e.jsx(h,{value:"relationships",children:"Therapist-Client"}),e.jsx(h,{value:"users",children:"User Stats"}),e.jsx(h,{value:"content",children:"Content Stats"})]}),e.jsxs(j,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(t,{title:"Total Users",value:s.totalUsers,description:"All registered users in the system",icon:e.jsx(u,{className:"h-4 w-4"}),colorClass:"text-primary"}),e.jsx(t,{title:"Total Clients",value:s.totalClients,description:"All registered clients",icon:e.jsx(u,{className:"h-4 w-4"}),colorClass:"text-blue-500"}),e.jsx(t,{title:"Total Therapists",value:s.totalTherapists,description:"All registered therapists",icon:e.jsx(u,{className:"h-4 w-4"}),colorClass:"text-green-500"}),e.jsx(t,{title:"System Health",value:"Excellent",description:"Overall system performance",icon:e.jsx(D,{className:"h-4 w-4"}),colorClass:"text-green-500"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(a,{className:"md:col-span-2",children:[e.jsxs(i,{children:[e.jsx(r,{children:"System Activity"}),e.jsx(c,{children:"Recent actions and trends"})]}),e.jsx(l,{children:e.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"Activity chart would appear here"})})]}),e.jsxs(a,{children:[e.jsxs(i,{children:[e.jsx(r,{children:"Quick Stats"}),e.jsx(c,{children:"Key performance indicators"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Active Clients"}),e.jsx("span",{className:"font-medium",children:s.activeClients})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Active Therapists"}),e.jsx("span",{className:"font-medium",children:s.activeTherapists})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Emotion Records"}),e.jsx("span",{className:"font-medium",children:s.totalEmotions})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Resource Usage"}),e.jsx("span",{className:"font-medium",children:s.resourceUsage})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Clients Without Therapist"}),e.jsx("span",{className:"font-medium text-amber-500",children:s.clientsWithoutTherapist})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Most Used Resource"}),e.jsx("span",{className:"font-medium text-primary text-xs",children:s.mostUsedResource})]})]})})]})]})]}),e.jsxs(j,{value:"relationships",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(t,{title:"Clients Assigned",value:s.totalClients-s.clientsWithoutTherapist,description:"Clients with a therapist",icon:e.jsx(L,{className:"h-4 w-4"}),colorClass:"text-green-500"}),e.jsx(t,{title:"Unassigned Clients",value:s.clientsWithoutTherapist,description:"Clients without a therapist",icon:e.jsx(g,{className:"h-4 w-4"}),colorClass:"text-amber-500"}),e.jsx(t,{title:"Therapists with Clients",value:s.totalTherapists-s.therapistsWithoutClients,description:"Therapists with at least one client",icon:e.jsx(H,{className:"h-4 w-4"}),colorClass:"text-blue-500"}),e.jsx(t,{title:"Unassigned Therapists",value:s.therapistsWithoutClients,description:"Therapists without any clients",icon:e.jsx(g,{className:"h-4 w-4"}),colorClass:"text-red-500"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(a,{children:[e.jsxs(i,{children:[e.jsx(r,{children:"Client Progress"}),e.jsx(c,{children:"Goal completion statistics"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Clients with Goals"}),e.jsx("span",{className:"font-medium",children:s.clientsWithGoals})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Avg. Goals per Client"}),e.jsx("span",{className:"font-medium",children:s.averageGoalsPerClient})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Avg. Emotions per Client"}),e.jsx("span",{className:"font-medium",children:s.averageEmotionsPerClient})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Most Active Therapist"}),e.jsx("span",{className:"font-medium",children:s.mostActiveTherapist})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Most Active Client"}),e.jsx("span",{className:"font-medium",children:s.mostActiveClient})]})]})})]}),e.jsxs(a,{children:[e.jsxs(i,{children:[e.jsx(r,{children:"Top Resource Usage"}),e.jsx(c,{children:"Most used resources by therapist-client pairs"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:s.topResources&&s.topResources.length>0?s.topResources.map((m,x)=>e.jsxs("div",{className:"flex items-center space-x-2 rounded-md bg-slate-50 p-2",children:[e.jsx(q,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"flex-grow text-sm font-medium",children:m.title}),e.jsxs("span",{className:"text-xs bg-primary/10 text-primary px-2 py-1 rounded",children:[m.useCount," ",m.useCount===1?"use":"uses"]})]},x)):e.jsx("div",{className:"text-center text-muted-foreground py-4",children:"No resource usage data available"})})})]})]})]}),e.jsx(j,{value:"users",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(a,{className:"md:col-span-2",children:[e.jsxs(i,{children:[e.jsx(r,{children:"User Growth"}),e.jsx(c,{children:"New users over time"})]}),e.jsx(l,{children:e.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"User growth chart would appear here"})})]}),e.jsxs(a,{children:[e.jsxs(i,{children:[e.jsx(r,{children:"User Breakdown"}),e.jsx(c,{children:"Distribution by role"})]}),e.jsx(l,{children:e.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"User role chart would appear here"})})]})]})}),e.jsxs(j,{value:"content",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(t,{title:"Emotions Tracked",value:s.totalEmotions,description:"Total emotion records",icon:e.jsx(B,{className:"h-4 w-4"}),colorClass:"text-red-500"}),e.jsx(t,{title:"Thought Records",value:s.totalThoughts,description:"Total thought records",icon:e.jsx(P,{className:"h-4 w-4"}),colorClass:"text-purple-500"}),e.jsx(t,{title:"Goals Created",value:s.totalGoals,description:"Total goal records",icon:e.jsx(G,{className:"h-4 w-4"}),colorClass:"text-amber-500"}),e.jsx(t,{title:"Resources",value:"24",description:"Resources in library",icon:e.jsx(W,{className:"h-4 w-4"}),colorClass:"text-emerald-500"})]}),e.jsxs(a,{children:[e.jsxs(i,{children:[e.jsx(r,{children:"Content Activity"}),e.jsx(c,{children:"Record creation over time"})]}),e.jsx(l,{children:e.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"Content activity chart would appear here"})})]})]})]})]})})}export{J as default};
