import{c as w,u as ge,m as Ne,r as m,n as Ee,y as we,j as e,C as l,e as y,f as N,a as c,g as ve,B as r,q as K,T as z,t as H,v as P,w as L,h as Z}from"./index-BJDVYPr2.js";import{u as be}from"./useQuery-CVl6tFXz.js";import{u as G}from"./useMutation-4_CoT2bx.js";import{u as Ce,C as B}from"./use-active-user-CkIppDip.js";import{u as De}from"./use-refresh-data-Dq9XIZaR.js";import{D as Se,b as Fe,c as ke,d as D,e as Ae,B as Te}from"./Header-HmO9KIvP.js";import{T as Me,a as Re,b as X,c as x,d as $e,e as h}from"./table-01yzukTO.js";import{D as I,a as V,b as J,c as q,d as ee,e as ze}from"./dialog-BkbRhY2O.js";import{A as He,a as Pe,b as Le,c as Be,d as Ie,e as Ve,f as Je,g as qe}from"./alert-dialog-bBvWK-5Q.js";import{R as Oe}from"./ReflectionWizard-ChKYTux2.js";import{C as Ue}from"./calendar-Ck4F2mgv.js";import{E as We}from"./eachDayOfInterval-D7CfGF_P.js";import{E as se}from"./eye-D3NTB46B.js";import{S as te}from"./square-pen-BwPwTV1q.js";import{A as O}from"./arrow-right-BBjUy21T.js";import{T as ae}from"./trash-2-ZtlY59XR.js";import{S as re}from"./sparkles-aDL3aOOp.js";import{H as ie}from"./target-7abParum.js";import{f as E}from"./format-CrnBQ42y.js";import{M as Qe}from"./message-square-BUQziOr0.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=w("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=w("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=w("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=w("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=w("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);function ys({limit:v}){const{activeUserId:d,isViewingClientData:u}=Ce();ge();const[_e,de]=Ne(),[s,i]=m.useState(null),[U,p]=m.useState(!1),[S,F]=m.useState(!1),[me,f]=m.useState(!1),[xe,b]=m.useState(!1),[g,C]=m.useState(null),{toast:W}=Ee();we();const{refreshAfterOperation:k}=De(),A=new URLSearchParams(window.location.search).get("id"),{data:n=[],isLoading:he,error:ue}=be({queryKey:d?[`/api/users/${d}/emotions`]:[],enabled:!!d});m.useEffect(()=>{if(A&&n.length>0){const t=parseInt(A,10),a=n.find(j=>j.id===t);a&&i(a)}},[n,A]);const T=G({mutationFn:async t=>{if(!d)throw new Error("User not authenticated");return Z("PATCH",`/api/users/${d}/emotions/${t.id}`,t)},onSuccess:(t,a)=>{k("emotion","update",a.id,"The emotion record has been updated successfully.",!1),f(!1)},onError:t=>{console.error("Error updating emotion record:",t),W({title:"Update failed",description:"There was a problem updating the emotion record. Please try again.",variant:"destructive"})}}),Q=G({mutationFn:async t=>{if(!d)throw new Error("User not authenticated");return Z("DELETE",`/api/users/${d}/emotions/${t}`)},onSuccess:(t,a)=>{k("emotion","delete",a,"The emotion record has been deleted successfully.",!1),C(null),b(!1)},onError:t=>{var a;if(console.error("Error deleting emotion record:",t),((a=t==null?void 0:t.response)==null?void 0:a.status)===404){k("emotion","delete",(g==null?void 0:g.id)||0,"The record no longer exists.",!1),C(null),b(!1);return}W({title:"Error",description:"Failed to delete the record. Please try again.",variant:"destructive"})}}),pe=t=>{i(t)},je=t=>{i(t),f(!0)},ye=t=>{u||de(`/thoughts/new?emotionId=${t.id}`)},Y=t=>{C(t),b(!0)},fe=()=>{g&&Q.mutate(g.id)},_=t=>{const a=new Date(t),j=new Date,$=new Date(j);return $.setDate($.getDate()-1),a.toDateString()===j.toDateString()?`Today, ${E(a,"h:mm a")}`:a.toDateString()===$.toDateString()?`Yesterday, ${E(a,"h:mm a")}`:E(a,"MMM d, yyyy, h:mm a")},o=t=>t?t.includes("Joy")||t.includes("Happy")||t.includes("Optimistic")?"bg-yellow-100 text-yellow-800":t.includes("Anger")||t.includes("Frustrat")||t.includes("Annoyed")?"bg-red-100 text-red-800":t.includes("Sad")||t.includes("Depress")||t.includes("Lonely")?"bg-blue-100 text-blue-800":t.includes("Fear")||t.includes("Anx")||t.includes("Worried")?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800":"bg-gray-100 text-gray-800";if(he)return e.jsxs(l,{children:[e.jsx(y,{children:e.jsx(N,{children:"Recent Entries"})}),e.jsx(c,{children:e.jsx("div",{className:"h-12 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-primary"})})})]});if(ue)return e.jsxs(l,{children:[e.jsx(y,{children:e.jsx(N,{children:"Recent Entries"})}),e.jsx(c,{children:e.jsx("p",{className:"text-center text-sm text-red-500",children:"Error loading emotion history. Please try again later."})})]});const M=v&&!U&&n?n.slice(0,v):n,R=Array.isArray(n)?n:[];return e.jsxs(e.Fragment,{children:[e.jsxs(l,{children:[e.jsxs(y,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Recent Entries"}),e.jsx(ve,{children:"Your recently recorded emotions and thoughts"})]}),v&&R.length>v&&e.jsx(r,{variant:"ghost",onClick:()=>p(!0),className:"text-sm text-primary hover:text-primary-dark",children:"View All"})]}),e.jsx(c,{children:R.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("p",{className:"text-neutral-500",children:"No emotion records yet."}),e.jsx("p",{className:"text-sm text-neutral-400 mt-1",children:"Use the emotion wheel to start tracking how you feel."})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:M==null?void 0:M.map(t=>e.jsxs(l,{className:"overflow-hidden",children:[e.jsx(y,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:_(t.timestamp)})]}),e.jsxs(Se,{children:[e.jsx(Fe,{asChild:!0,children:e.jsx(r,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(We,{className:"h-4 w-4"})})}),e.jsxs(ke,{align:"end",children:[e.jsxs(D,{onClick:()=>pe(t),children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"View Details"]}),!u&&e.jsxs(e.Fragment,{children:[e.jsxs(D,{onClick:()=>je(t),children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(D,{onClick:()=>ye(t),children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Add Thought Record"]}),e.jsx(Ae,{}),e.jsxs(D,{onClick:()=>Y(t),className:"text-destructive focus:text-destructive",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]})}),e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Emotion:"}),e.jsx(Te,{className:o(t.tertiaryEmotion||t.primaryEmotion||t.coreEmotion),children:t.tertiaryEmotion||t.primaryEmotion||t.coreEmotion})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Intensity:"}),e.jsxs("span",{className:"text-sm font-semibold",children:[t.intensity,"/10"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground block mb-1",children:"Situation:"}),e.jsx("p",{className:"text-sm line-clamp-2",children:t.situation})]})]})})]},t.id))})})]}),s&&e.jsx(I,{open:!!s&&!S,onOpenChange:()=>i(null),children:e.jsxs(V,{className:"max-w-3xl max-h-[80vh] overflow-y-auto custom-scrollbar",children:[e.jsxs(J,{className:"sticky top-0 bg-background z-10 pb-4",children:[e.jsxs(q,{className:"flex items-center gap-2 text-lg",children:[e.jsxs("div",{className:`p-2 rounded-full ${o(s.coreEmotion).replace("text-","text-").replace("bg-","bg-")}`,children:[s.coreEmotion==="Joy"&&e.jsx(le,{className:"h-5 w-5"}),s.coreEmotion==="Sadness"&&e.jsx(oe,{className:"h-5 w-5"}),s.coreEmotion==="Anger"&&e.jsx(ne,{className:"h-5 w-5"}),s.coreEmotion==="Fear"&&e.jsx(K,{className:"h-5 w-5"}),s.coreEmotion==="Surprise"&&e.jsx(re,{className:"h-5 w-5"}),s.coreEmotion==="Disgust"&&e.jsx(ce,{className:"h-5 w-5"}),!["Joy","Sadness","Anger","Fear","Surprise","Disgust"].includes(s.coreEmotion)&&e.jsx(ie,{className:"h-5 w-5"})]}),"Emotion Details"]}),e.jsxs(ee,{children:["Recorded on ",E(new Date(s.timestamp),"MMMM d, yyyy 'at' h:mm a")]})]}),e.jsxs("div",{className:"space-y-6 pr-1",children:[e.jsx(l,{className:"border-l-4 overflow-hidden",style:{borderLeftColor:s.coreEmotion==="Joy"?"#FFC107":s.coreEmotion==="Sadness"?"#2196F3":s.coreEmotion==="Anger"?"#F44336":s.coreEmotion==="Fear"?"#4CAF50":s.coreEmotion==="Surprise"?"#9C27B0":s.coreEmotion==="Disgust"?"#795548":"#9E9E9E"},children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"rounded-full w-16 h-16 flex items-center justify-center",style:{background:`conic-gradient(${s.coreEmotion==="Joy"?"#FFC107":s.coreEmotion==="Sadness"?"#2196F3":s.coreEmotion==="Anger"?"#F44336":s.coreEmotion==="Fear"?"#4CAF50":s.coreEmotion==="Surprise"?"#9C27B0":s.coreEmotion==="Disgust"?"#795548":"#9E9E9E"} ${s.intensity*10}%, #f1f5f9 0)`},children:e.jsxs("div",{className:"bg-white rounded-full w-10 h-10 flex items-center justify-center text-sm font-semibold",children:[s.intensity,"/10"]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Core Emotion"}),e.jsx("span",{className:"font-medium",children:s.coreEmotion})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[s.primaryEmotion&&e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${o(s.primaryEmotion)}`,children:s.primaryEmotion}),s.tertiaryEmotion&&e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${o(s.tertiaryEmotion)}`,children:s.tertiaryEmotion})]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(l,{children:[e.jsx(y,{className:"pb-2",children:e.jsxs(N,{className:"text-sm flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4 text-slate-500"}),"Context Details"]})}),e.jsx(c,{className:"pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Location"}),e.jsx("div",{className:"text-sm font-medium capitalize",children:s.location||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Company"}),e.jsx("div",{className:"text-sm font-medium capitalize",children:s.company||"Not specified"})]})]})})]}),e.jsxs(l,{children:[e.jsx(y,{className:"pb-2",children:e.jsxs(N,{className:"text-sm flex items-center gap-2",children:[e.jsx(Qe,{className:"h-4 w-4 text-slate-500"}),"Situation"]})}),e.jsx(c,{className:"pt-0",children:e.jsx("div",{className:"text-sm",children:s.situation||"No situation description provided"})})]})]}),e.jsxs("div",{className:"flex flex-wrap justify-between gap-2 pt-4",children:[e.jsx("div",{children:e.jsx("h4",{className:"text-sm font-medium text-neutral-500 mb-2",children:"Related Records"})}),e.jsx("div",{className:"flex gap-2",children:!u&&e.jsxs(r,{variant:"default",onClick:()=>{F(!0)},children:[e.jsx(O,{className:"mr-1 h-4 w-4"}),"Create Thought Record"]})})]})]})]})}),s&&S&&e.jsx(Oe,{emotion:s,open:S,onClose:()=>{F(!1),i(null)}}),s&&e.jsx(I,{open:me,onOpenChange:t=>{t||f(!1)},children:e.jsxs(V,{className:"max-w-3xl max-h-[80vh] overflow-y-auto custom-scrollbar",children:[e.jsxs(J,{className:"sticky top-0 bg-background z-10 pb-4",children:[e.jsxs(q,{className:"flex items-center gap-2 text-lg",children:[e.jsxs("div",{className:`p-2 rounded-full ${o(s.coreEmotion)}`,children:[s.coreEmotion==="Joy"&&e.jsx(le,{className:"h-5 w-5"}),s.coreEmotion==="Sadness"&&e.jsx(oe,{className:"h-5 w-5"}),s.coreEmotion==="Anger"&&e.jsx(ne,{className:"h-5 w-5"}),s.coreEmotion==="Fear"&&e.jsx(K,{className:"h-5 w-5"}),s.coreEmotion==="Surprise"&&e.jsx(re,{className:"h-5 w-5"}),s.coreEmotion==="Disgust"&&e.jsx(ce,{className:"h-5 w-5"}),!["Joy","Sadness","Anger","Fear","Surprise","Disgust"].includes(s.coreEmotion)&&e.jsx(ie,{className:"h-5 w-5"})]}),"Edit Emotion Record"]}),e.jsxs(ee,{children:["Update the details of your emotion recorded on ",E(new Date(s.timestamp),"MMMM d, yyyy 'at' h:mm a")]})]}),e.jsxs("form",{onSubmit:t=>{t.preventDefault();const a=new FormData(t.currentTarget),j={id:s.id,intensity:parseInt(a.get("intensity"))||s.intensity,situation:a.get("situation")||s.situation,location:a.get("location")||s.location,company:a.get("company")||s.company};T.mutate(j)},children:[e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsx(l,{className:"border-l-4 overflow-hidden",style:{borderLeftColor:s.coreEmotion==="Joy"?"#FFC107":s.coreEmotion==="Sadness"?"#2196F3":s.coreEmotion==="Anger"?"#F44336":s.coreEmotion==="Fear"?"#4CAF50":s.coreEmotion==="Surprise"?"#9C27B0":s.coreEmotion==="Disgust"?"#795548":"#9E9E9E"},children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"rounded-full w-16 h-16 flex items-center justify-center relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`conic-gradient(${s.coreEmotion==="Joy"?"#FFC107":s.coreEmotion==="Sadness"?"#2196F3":s.coreEmotion==="Anger"?"#F44336":s.coreEmotion==="Fear"?"#4CAF50":s.coreEmotion==="Surprise"?"#9C27B0":s.coreEmotion==="Disgust"?"#795548":"#9E9E9E"} ${s.intensity*10}%, #f1f5f9 0)`}}),e.jsx("div",{className:"bg-white rounded-full w-10 h-10 flex items-center justify-center text-sm font-semibold z-10",children:e.jsx("input",{type:"number",id:"intensity",name:"intensity",min:"1",max:"10",className:"w-7 border-none text-center p-0 bg-transparent",defaultValue:s.intensity})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Core Emotion"}),e.jsx("span",{className:"font-medium",children:s.coreEmotion})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[s.primaryEmotion&&e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${o(s.primaryEmotion)}`,children:s.primaryEmotion}),s.tertiaryEmotion&&e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${o(s.tertiaryEmotion)}`,children:s.tertiaryEmotion})]})]})]})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"situation",className:"text-sm font-medium flex items-center gap-2",children:["Situation",e.jsx(z,{children:e.jsxs(H,{children:[e.jsx(P,{asChild:!0,children:e.jsx(B,{className:"h-3.5 w-3.5 text-muted-foreground cursor-help"})}),e.jsx(L,{children:e.jsx("div",{children:"Describe what happened when you experienced this emotion"})})]})})]}),e.jsx("textarea",{id:"situation",name:"situation",className:"w-full px-3 py-2 border rounded-md min-h-[80px]",defaultValue:s.situation})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"location",className:"text-sm font-medium flex items-center gap-2",children:["Location",e.jsx(z,{children:e.jsxs(H,{children:[e.jsx(P,{asChild:!0,children:e.jsx(B,{className:"h-3.5 w-3.5 text-muted-foreground cursor-help"})}),e.jsx(L,{children:e.jsx("div",{children:"Where were you when you felt this emotion?"})})]})})]}),e.jsx("input",{type:"text",id:"location",name:"location",className:"w-full px-3 py-2 border rounded-md",defaultValue:s.location||""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"company",className:"text-sm font-medium flex items-center gap-2",children:["Company",e.jsx(z,{children:e.jsxs(H,{children:[e.jsx(P,{asChild:!0,children:e.jsx(B,{className:"h-3.5 w-3.5 text-muted-foreground cursor-help"})}),e.jsx(L,{children:e.jsx("div",{children:"Who were you with when this happened?"})})]})})]}),e.jsx("input",{type:"text",id:"company",name:"company",className:"w-full px-3 py-2 border rounded-md",defaultValue:s.company||""})]})]})]})]}),e.jsxs(ze,{className:"mt-6",children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(r,{type:"submit",disabled:T.isPending,children:T.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})}),e.jsx(I,{open:U,onOpenChange:p,children:e.jsxs(V,{className:"max-w-5xl max-h-[80vh] overflow-y-auto custom-scrollbar",children:[e.jsx(J,{className:"sticky top-0 bg-background z-10 pb-4",children:e.jsx(q,{children:"Emotion History"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Me,{children:[e.jsx(Re,{children:e.jsxs(X,{children:[e.jsx(x,{children:"Date & Time"}),e.jsx(x,{children:"Emotion"}),e.jsx(x,{children:"Intensity"}),e.jsx(x,{children:"Situation"}),e.jsx(x,{children:"Location"}),e.jsx(x,{children:"Company"}),e.jsx(x,{children:"Actions"})]})}),e.jsx($e,{children:R.map(t=>e.jsxs(X,{children:[e.jsx(h,{className:"whitespace-nowrap text-sm",children:_(t.timestamp)}),e.jsx(h,{children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${o(t.tertiaryEmotion||t.primaryEmotion||t.coreEmotion)}`,children:t.tertiaryEmotion||t.primaryEmotion||t.coreEmotion})}),e.jsxs(h,{className:"whitespace-nowrap text-sm",children:[t.intensity,"/10"]}),e.jsx(h,{className:"max-w-xs truncate text-sm",children:t.situation}),e.jsx(h,{className:"text-sm capitalize",children:t.location||"—"}),e.jsx(h,{className:"text-sm capitalize",children:t.company||"—"}),e.jsx(h,{className:"whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[!u&&e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>{i(t),f(!0),p(!1)},className:"text-primary hover:text-primary-dark",title:"Edit emotion",children:e.jsx(te,{className:"h-4 w-4"})}),!u&&e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>{i(t),F(!0),p(!1)},className:"text-primary hover:text-primary-dark",title:"Add thought record",children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>{i(t),p(!1)},className:"text-primary hover:text-primary-dark",children:e.jsx(se,{className:"h-4 w-4"})}),!u&&e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>{Y(t),p(!1)},className:"text-destructive hover:text-destructive/80",children:e.jsx(ae,{className:"h-4 w-4"})})]})})]},t.id))})]})})]})}),e.jsx(He,{open:xe,onOpenChange:b,children:e.jsxs(Pe,{children:[e.jsxs(Le,{children:[e.jsx(Be,{children:"Delete Emotion Record"}),e.jsx(Ie,{children:"Are you sure you want to delete this emotion record? This will also remove any linked thought records and reflections. This action cannot be undone."})]}),e.jsxs(Ve,{children:[e.jsx(Je,{onClick:()=>C(null),children:"Cancel"}),e.jsx(qe,{onClick:fe,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:Q.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})}export{ys as E};
