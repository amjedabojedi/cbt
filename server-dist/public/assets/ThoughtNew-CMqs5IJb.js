import{u as R,m as k,r as i,j as e,i as T,B as s,C as h,e as d,f as u,g as x,a as f}from"./index-BJDVYPr2.js";import{u as E}from"./useQuery-CVl6tFXz.js";import{u as b}from"./use-active-user-CkIppDip.js";import{A as n}from"./AppLayout-B4pR-pjA.js";import{R as L}from"./ReflectionWizard-ChKYTux2.js";import{C as p}from"./chevron-left-DkowiYxd.js";import{B as g}from"./brain-circuit-ClF974iG.js";import"./utils-km2FGkQ4.js";import"./Header-HmO9KIvP.js";import"./target-7abParum.js";import"./index-ZMpGrT0S.js";import"./index-epKMAjhH.js";import"./check-CPyQFfyd.js";import"./form-Bn3qej8w.js";import"./label-DKKVfa8V.js";import"./dialog-BkbRhY2O.js";import"./textarea-8UmQ7iuL.js";import"./input-C744jVRX.js";import"./checkbox-CpzJVwUi.js";import"./index-pLghM4Oe.js";import"./progress-XD4z056s.js";import"./slider-BHLSMB0K.js";import"./info-PLI2XuV7.js";import"./accordion-C_vhZxL6.js";import"./chevron-down-JR_7gpC-.js";import"./circle-plus-C1yyTLEf.js";function se(){R();const{activeUserId:c}=b(),[B,t]=k(),[o,N]=i.useState(null),[l,y]=i.useState(null),[w,j]=i.useState(!0);i.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("emotionId");a?N(parseInt(a,10)):j(!1)},[]);const{data:r,isLoading:C}=E({queryKey:c&&o?[`/api/users/${c}/emotions`]:[],enabled:!!(c&&o)});i.useEffect(()=>{if(r&&Array.isArray(r)&&o){const m=r.find(a=>a.id===o);m&&y(m),j(!1)}},[r,o]);const v=()=>{t("/thoughts")};return w||C?e.jsx(n,{title:"New Thought Record",children:e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsx("div",{className:"flex items-center justify-center min-h-[70vh]",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(T,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})})})}):!l&&o?e.jsx(n,{title:"New Thought Record",children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs(s,{variant:"outline",onClick:()=>t("/thoughts"),className:"mb-4",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Back to Thought Records"]}),e.jsxs(h,{children:[e.jsxs(d,{children:[e.jsx(u,{children:"Emotion Not Found"}),e.jsx(x,{children:"The emotion you're trying to associate with this thought record could not be found."})]}),e.jsxs(f,{children:[e.jsx("p",{children:"The emotion may have been deleted or you may not have permission to view it."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4",children:[e.jsx(s,{onClick:()=>t("/thoughts"),children:"Return to Thought Records"}),e.jsx(s,{variant:"outline",onClick:()=>t("/emotion-tracking"),children:"Go to Emotion Tracking"})]})]})]})]})}):o?e.jsx(n,{title:"New Thought Record",children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs(s,{variant:"outline",onClick:()=>t("/thoughts"),className:"mb-4",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Back to Thought Records"]}),e.jsx(h,{className:"mb-6",children:e.jsxs(d,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5 text-primary"}),"Create Thought Record"]}),e.jsx(x,{children:"Record your thoughts related to the selected emotion"})]})}),l&&e.jsx(L,{emotion:l,open:!0,onClose:v})]})}):e.jsx(n,{title:"New Thought Record",children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs(s,{variant:"outline",onClick:()=>t("/thoughts"),className:"mb-4",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Back to Thought Records"]}),e.jsxs(h,{className:"mb-6",children:[e.jsxs(d,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5 text-primary"}),"Create Thought Record"]}),e.jsx(x,{children:"Please select an emotion from your history to associate with this thought record."})]}),e.jsxs(f,{children:[e.jsx("p",{className:"mb-4",children:"Thought records work best when they're linked to a specific emotion you've experienced."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(s,{onClick:()=>t("/emotion-tracking?tab=history"),children:"Select from Emotion History"}),e.jsx(s,{variant:"outline",onClick:()=>t("/emotion-tracking"),children:"Record a New Emotion First"})]})]})]})]})})}export{se as default};
