<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <meta name="application-name" content="ResilienceHub" />
    <meta name="description" content="A comprehensive platform for cognitive behavioral tools and tracking" />
    <meta name="keywords" content="CBT tools, mental health tracking, emotions, thoughts, resilience" />
    <title>ResilienceHub | Navigate Your Emotional Journey</title>
    <!-- WebSocket Error Prevention Script - runs before any other scripts -->
    <script>
      (function() {
        // Save reference to original WebSocket constructor
        var OriginalWebSocket = window.WebSocket;
        
        // Override WebSocket constructor to intercept invalid connections
        window.WebSocket = function(url, protocols) {
          if (typeof url === 'string' && 
             (url.includes('localhost:undefined') || 
              url.match(/wss?:\/\/localhost:[^0-9]/))) {
            
            // Return a dummy WebSocket object for invalid URLs
            var dummySocket = {};
            
            // Add required properties
            dummySocket.url = url;
            dummySocket.readyState = 3; // CLOSED
            dummySocket.CLOSED = 3;
            dummySocket.CLOSING = 2;
            dummySocket.CONNECTING = 0;
            dummySocket.OPEN = 1;
            
            // Add dummy methods
            dummySocket.close = function() {};
            dummySocket.send = function() {};
            dummySocket.addEventListener = function() {};
            dummySocket.removeEventListener = function() {};
            
            // Add event handlers
            ['open', 'message', 'close', 'error'].forEach(function(event) {
              Object.defineProperty(dummySocket, 'on' + event, {
                set: function() {},
                get: function() { return null; }
              });
            });
            
            return dummySocket;
          }
          
          // For valid URLs, use the original WebSocket
          return new OriginalWebSocket(url, protocols);
        };
        
        // Copy static properties
        window.WebSocket.CLOSED = OriginalWebSocket.CLOSED;
        window.WebSocket.CLOSING = OriginalWebSocket.CLOSING;
        window.WebSocket.CONNECTING = OriginalWebSocket.CONNECTING;
        window.WebSocket.OPEN = OriginalWebSocket.OPEN;
        
        // Suppress WebSocket errors
        var originalConsoleError = console.error;
        console.error = function() {
          var args = Array.prototype.slice.call(arguments);
          var errorString = args.join(' ');
          
          if (errorString.includes('WebSocket') && 
              (errorString.includes('localhost:undefined') || 
               errorString.includes('Failed to construct'))) {
            // Silently ignore WebSocket errors
            return;
          }
          
          // Pass through other errors
          return originalConsoleError.apply(console, arguments);
        };
        
        // Capture unhandled promise rejections for WebSocket errors
        window.addEventListener('unhandledrejection', function(event) {
          if (event.reason && 
             (event.reason.message && event.reason.message.includes('WebSocket') ||
              event.reason.stack && event.reason.stack.includes('WebSocket'))) {
            event.preventDefault();
          }
        });
      })();
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Roboto:wght@300;400;500;700&family=Noto+Sans+Arabic:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
      .intensity-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #4285F4;
        cursor: pointer;
        border: 2px solid white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      }
      .intensity-slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #4285F4;
        cursor: pointer;
        border: 2px solid white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      }
      [dir="rtl"] .emotion-wheel .slice {
        transform-origin: center;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <!-- This is a replit script which adds a banner on the top of the page when opened in development mode outside the replit environment -->
    <script type="text/javascript" src="https://replit.com/public/js/replit-dev-banner.js"></script>
  </body>
</html>
